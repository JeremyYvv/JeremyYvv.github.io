[{"word":["C++","05","标准","文档","中","Secton","12.1.5","关于","默认","构造","函数","的","说明","A","efault","constructor","for","a","class","X","s","a","constructor","of","class","X","that","can","be","calle","wthout","an","argument",".","If","there","s","no","user","-","eclare","constructor","for","class","X",",","a","efault","constructor","s","mplctly","eclare","类","X","的","默认","构造","函数","是","一个","无","参","构造","函数","，","在","类","X","中","没有","用户","声明","的","构造","函数","时","，","被","隐式","声明","。","Q","1","：","用户","未定义","构造","函数","时","，","默认","构造","函数","一定会","被","生成","吗","？","A","1","：","不一","定","。","在","上","一段","Secton","12.1.5","的","说明","后","，","还有","一段","额外","的","说明","A","efault","constructor","s","tral","f","t","s","mplctly","-","eclare","an","f",":","ts","class","has","no","rtual","functons","an","no","rtual","base","classes",",","anall","the","rect","base","classes","of","ts","class","hae","tral","efault","constructors",",","anfor","all","the","non","-","statc","ata","members","of","ts","class","that","are","of","class","type","(","or","array","thereof",")",",","each","such","class","has","a","tral","efault","constructor",".","一个","隐式","声明","的","默认","构造","函数","将","是","无","价值","（","tral","）","的","，","如果","类","里","没有","虚","函数","和","虚基类","，","并且","类","的","直接","基类","都","有无","价值","的","默认","构造","函数","，","并且","类","中","所有","非","静态","成员","变量","都","有无","价值","的","默认","构造","函数","可见","，","即使","是","默认","构造","函数","，","也","被","分为","了","有价值","（","non","-","tral","）","和","无","价值","（","tral","）","两种","。","而","对于","无","价值","的","默认","构造","函数","，","实际上","并不","会","被","生成","。","求证","通过","反","汇编","，","对比","用户","定义","无","参","构造","和","默认","构造","，","查看","在","类","的","实例","过程","中","是否","被","调用","。","1",".","类","内","定义","无","参","构造","函数","class","Demo","&","#","123",";","publc",":","Demo","(",")","&","#","123",";","&","#","125",";","&","#","125",";",";","nt","man","(",")","&","#","123",";","Demo","a",";","return","0",";","&","#","125",";","编译","完成","后","查看","反","汇编","（","截取","text","段","中","相关","的","一段","）",":","nt","man","(",")","&","#","123",";","400546",":","55","push","%","rbp","400547",":","48","89","e","5","mo","%","rsp",",","%","rbp","40054","a",":","48","83","ec","10","sub","$","0","x","10",",","%","rsp","40054","e",":","64","48","8","b","04","25","28","00","mo","%","fs",":","0","x","28",",","%","rax","400555",":","00","00","400557",":","48","89","45","f","8","mo","%","rax",",","-","0","x","8","(","%","rbp",")","40055","b",":","31","c","0","xor","%","eax",",","%","eax","Demo","a",";","40055",":","48","8","45","f","7","lea","-","0","x","9","(","%","rbp",")",",","%","rax","400561",":","48","89","c","7","mo","%","rax",",","%","r","400564",":","e","8","1","b","00","00","00","callq","400584","_","ZN","4","DemoC","1","E",">","return","0",";","400569",":","b","8","00","00","00","00","mo","$","0","x","0",",","%","eax","&","#","125",";","40056","e",":","48","8","b","55","f","8","mo","-","0","x","8","(","%","rbp",")",",","%","rx","400572",":","64","48","33","14","25","28","00","xor","%","fs",":","0","x","28",",","%","rx","400579",":","00","00","40057","b",":","74","05","je","400582","man","+","0","x","3","c",">","40057",":","e","8","9","e","fe","ff","ff","callq","400420","_","_","stack","_","chk","_","fal","@","plt",">","400582",":","c","9","leaeq","400583",":","c","3","retq","0000000000400584","_","ZN","4","DemoC","1","E",">",":","class","Demo","&","#","123",";","publc",":","Demo","(",")","&","#","123",";","&","#","125",";","400584",":","55","push","%","rbp","400585",":","48","89","e","5","mo","%","rsp",",","%","rbp","400588",":","48","89","7","f","8","mo","%","r",",","-","0","x","8","(","%","rbp",")","40058","c",":","90","nop","40058",":","5","pop","%","rbp","40058","e",":","c","3","retq","40058","f",":","90","nop","Lne","13","man","函数","中","，","Demo","a",";","调用","了","Demo","类","的","无","参","构造","函数","_","ZN","4","DemoC","1","E",".","2",".","类","内","不","定义","无","参","构造","函数","，","查看","是否","会","调用","默认","构造","函数","class","Dere","&","#","123",";","&","#","125",";",";","nt","man","(",")","&","#","123",";","Dere","a",";","return","0",";","&","#","125",";","编译","完成","后","查看","反","汇编","（","截取","text","段","中","相关","的","一段","）",":","class","Demo","&","#","123",";","&","#","125",";",";","nt","man","(",")","&","#","123",";","40046",":","55","push","%","rbp","40047",":","48","89","e","5","mo","%","rsp",",","%","rbp","Demo","a",";","return","0",";","4004","a",":","b","8","00","00","00","00","mo","$","0","x","0",",","%","eax","&","#","125",";","4004","f",":","5","pop","%","rbp","4004","e","0",":","c","3","retq","4004","e","1",":","66","2","e","0","f","1","f","84","00","00","nopw","%","cs",":","0","x","0","(","%","rax",",","%","rax",",","1",")","4004","e","8",":","00","00","00","4004","eb",":","0","f","1","f","44","00","00","nopl","0","x","0","(","%","rax",",","%","rax",",","1",")","00000000004004","f","0","_","_","lbc","_","csu","_","nt",">",":","可见","，","并没","有生","成","或","调用","默认","构造","函数","，","因","为","类","Demo","中","没有","虚","函数","虚基类","，","且","所有","成员","变量","和","直接","基类","都","没有","non","-","tral","默认","构造","或","用户","声明","构造","函数","。","3",".","作为","对比","，","只","在","空","类","中","写","个","虚","函数","，","看看","是否","会","按照","标准","中","说的","那样","，","生成","一个","有价值","的","默认","构造","函数","class","Demo","&","#","123",";","rtual","o","func","(",")","&","#","123",";","&","#","125",";","&","#","125",";",";","nt","man","(",")","&","#","123",";","Demo","a",";","return","0",";","&","#","125",";","编译","完成","后","查看","反","汇编","：","nt","man","(",")","&","#","123",";","400676",":","55","push","%","rbp","400677",":","48","89","e","5","mo","%","rsp",",","%","rbp","40067","a",":","48","83","ec","10","sub","$","0","x","10",",","%","rsp","40067","e",":","64","48","8","b","04","25","28","00","mo","%","fs",":","0","x","28",",","%","rax","400685",":","00","00","400687",":","48","89","45","f","8","mo","%","rax",",","-","0","x","8","(","%","rbp",")","40068","b",":","31","c","0","xor","%","eax",",","%","eax","Demo","a",";","40068",":","48","8","45","f","0","lea","-","0","x","10","(","%","rbp",")",",","%","rax","400691",":","48","89","c","7","mo","%","rax",",","%","r","400694",":","e","8","27","00","00","00","callq","4006","c","0","_","ZN","4","DemoC","1","E",">","return","0",";","400699",":","b","8","00","00","00","00","mo","$","0","x","0",",","%","eax","&","#","125",";","40069","e",":","48","8","b","55","f","8","mo","-","0","x","8","(","%","rbp",")",",","%","rx","4006","a","2",":","64","48","33","14","25","28","00","xor","%","fs",":","0","x","28",",","%","rx","4006","a","9",":","00","00","4006","ab",":","74","05","je","4006","b","2","man","+","0","x","3","c",">","4006","a",":","e","8","ae","fe","ff","ff","callq","400560","_","_","stack","_","chk","_","fal","@","plt",">","4006","b","2",":","c","9","leaeq","4006","b","3",":","c","3","retq","00000000004006","b","4","_","ZN","4","Demo","4","funcE",">",":","class","Demo","&","#","123",";","rtual","o","func","(",")","&","#","123",";","&","#","125",";","4006","b","4",":","55","push","%","rbp","4006","b","5",":","48","89","e","5","mo","%","rsp",",","%","rbp","4006","b","8",":","48","89","7","f","8","mo","%","r",",","-","0","x","8","(","%","rbp",")","4006","bc",":","90","nop","4006","b",":","5","pop","%","rbp","4006","be",":","c","3","retq","4006","bf",":","90","nop","00000000004006","c","0","_","ZN","4","DemoC","1","E",">",":","class","Demo","&","#","123",";","4006","c","0",":","55","push","%","rbp","4006","c","1",":","48","89","e","5","mo","%","rsp",",","%","rbp","4006","c","4",":","48","89","7","f","8","mo","%","r",",","-","0","x","8","(","%","rbp",")","4006","c","8",":","ba","78","07","40","00","mo","$","0","x","400778",",","%","ex","4006","c",":","48","8","b","45","f","8","mo","-","0","x","8","(","%","rbp",")",",","%","rax","可见","，","在","类","中","有","虚","函数","的","时候","，","的确","会","生成","默认","构造","函数","并","在","man","中","Lne","13","进行","了","调用","。","至于","其他","几种","情况","，","如","类","有","虚基类","、","非","静态","成员","变量","或","直接","基类","生成","了","构造","函数","，","才","会","生成","默认","构造","函数","。","Q","2","：","默认","构造","函数","会","初始","化成","员","变量","吗","？","A","2","：","不一","定","在","C++","05","标准","文档","Secton","12.1.8","中","有","说明","Default","constructors","are","calle","mplctly","to","create","class","objects","of","statc","or","automatc","storage","uraton","efne","wthout","an","ntalze",".","默认","构造","函数","，","会","在","静态","或","自动","存储","期间","被","隐式","调用","，","来","创建","类","对象","，","没有","初始化","。","默认","构造","不","一定会","设定","每一个","成员","变量","的","默认值","默认","构造","函数","只是","为了","满足","编译器","的","需要","，","将","类","中","需要","构造","的","成员","变量","按","声明","的","顺序","依次","构造","出来","，","使","程序","能够","运行","，","但","未必","会","进行","初始化","！","在","C++","的","设计","中","，","对","成员","变量","进行","初始化","这种","，","为了","满足","程序","的","需要","，","是","程序","员","的","责任","。","求证","#","nclue","ostream",">","usng","namespace","st",";","class","Base","&","#","123",";","publc",":","nt","m","_","a",";","rtual","o","func","(",")","&","#","123",";","cout","m","_","a","enl",";","&","#","125",";","&","#","125",";",";","nt","man","(",")","&","#","123",";","Base","A",";","A",".","func","(",")",";","return","0",";","&","#","125",";","这","段","代码","可以","保证","使用","默认","构造","函数","构造","了","对象","A","，","然后","调用","func","方法","输出","成员","变量","的","值","jeremynancy@ubuntu",":","~","cppconstructor","$","g","+","+","-","-","erson","g","+","+","(","Ubuntu","5.4.0","-","6","ubuntu","1","~","16.04.1",")","5.4.0","20160609","Copyrght","(","C",")","2015","Free","Software","Founaton",",","Inc",".","Ths","s","free","software",";","see","the","source","for","copyng","contons",".","There","s","NO","warranty",";","not","een","for","MERCHANTABILITY","or","FITNESS","FOR","A","PARTICULAR","PURPOSE",".","jeremynancy@ubuntu",":","~","cppconstructor","$",".","efault","-","alue","4196368","编译","运行","之后","发现","是","一个","随机","值","，","并没有","初始","化成","零","值","，","至少","在","图示","中的","这个","版本","g","+","+","编译器","中","是","这样","的","。","经过","尝试","，","的确","有些","环境","或","版本","下","的","某种","编译器","会","自动","把","成员","变量","初始","化成","零","值","，","但是","这","并不","是","C++","标准","中","要求","编译器","做","的","事情","，","所以","应该","这个","初始化","的","职责","应该","由","程序员","来","承担","。","Q","3","：","一个","类","的","构造","过程","中","，","基类","、","成员","变量","和","类","本身","构造","函数","调用","的","顺序","？","编译器","是","如何","实现","的","？","A","3","：","调用","顺序","：","基类","构造","函数","=","成员","变量","构造","函数","=","类","本身","构造","函数","。","实现","方式","：","编译器","通过","在","类","的","每个","构造","函数","顶部","进行","填充","，","以","实现","这个","构造","顺序","。","对于","下列","类","代码","#","nclue","ostream",">","usng","namespace","st",";","class","Base","&","#","123",";","publc",":","Base","(",")","&","#","123",";","cout","\"","Base","\"","enl",";","&","#","125",";","&","#","125",";",";","class","Member","&","#","123",";","publc",":","Member","(",")","&","#","123",";","cout","\"","Member","\"","enl",";","&","#","125",";","&","#","125",";",";","class","Demo",":","publc","Base","&","#","123",";","publc",":","Member","m",";","Demo","(",")","&","#","123",";","cout","\"","Demo","\"","enl",";","&","#","125",";","Demo","(","nt","x",")","&","#","123",";","cout","\"","Demo","1","\"","enl",";","&","#","125",";","&","#","125",";",";","nt","man","(",")","&","#","123",";","Demo","A",";","return","0",";","&","#","125",";","Demo","类","的","每个","构造","函数","在","编译","时会","被","扩张","成","如下","Demo",":",":","Demo","(",")","&","#","123",";","插入","父类","构造","Base",":",":","Base","(",")","插入","成员","变量","构造","Member",":",":","Member","(",")","继续","本身","的","处理","cout","\"","Demo","\"","enl",";","&","#","125",";","求证","编译","后","反","汇编","查看","无","参","构造","函数","class","Demo",":","publc","Base","&","#","123",";","publc",":","Member","m",";","Demo","(",")","&","#","123",";","4009","a","0",":","55","push","%","rbp","4009","a","1",":","48","89","e","5","mo","%","rsp",",","%","rbp","4009","a","4",":","48","83","ec","10","sub","$","0","x","10",",","%","rsp","4009","a","8",":","48","89","7","f","8","mo","%","r",",","-","0","x","8","(","%","rbp",")","4009","ac",":","48","8","b","45","f","8","mo","-","0","x","8","(","%","rbp",")",",","%","rax","4009","b","0",":","48","89","c","7","mo","%","rax",",","%","r","4009","b","3",":","e","8","90","ff","ff","ff","callq","400948","_","ZN","4","BaseC","1","E",">","4009","b","8",":","48","8","b","45","f","8","mo","-","0","x","8","(","%","rbp",")",",","%","rax","4009","bc",":","48","89","c","7","mo","%","rax",",","%","r","4009","bf",":","e","8","b","0","ff","ff","ff","callq","400974","_","ZN","6","MemberC","1","E",">","cout","\"","Demo","\"","enl",";","4009","c","4",":","be","80","0","a","40","00","mo","$","0","x","400","a","80",",","%","es","4009","c","9",":","bf","80","10","60","00","mo","$","0","x","601080",",","%","e","4009","ce",":","e","8","9","f","ff","ff","callq","400770","_","ZStlsISt","11","char","_","tratsIcEERSt","13","basc","_","ostreamIcT","_","ES","5","_","PKc","@","plt",">","40093",":","be","a","0","07","40","00","mo","$","0","x","4007","a","0",",","%","es","40098",":","48","89","c","7","mo","%","rax",",","%","r","4009","b",":","e","8","b","0","f","ff","ff","callq","400790","_","ZNSolsEPFRSoS","_","E","@","plt",">","&","#","125",";","可见","，","在","Demo",":",":","Demo","构造","函数","原本","的","函数","体","之前","，","依次","插入","了","Base","类","的","构造","函数","_","ZN","4","BaseC","1","E","，","和","Member","类","的","构造","函数","_","ZN","6","MemberC","1","E","."],"url":"https://jeremyyvv.github.io/2021/03/21/C++/ObjectModel/default-constructor/","title":"默认构造函数","content":"C++05标准文档 中 Section 12.1.5 关于默认构造函数的说明\n\nA default constructor for a class X is a constructor of class X that can be c...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/C/","name":"C++"},"date":"2021-03-21 20:11:00"},{"word":["条款","30","：","确保","目标","区间","足够","大","首先","了解","标准","库","中的","一个","算法","：","template","class","InputIterator",",","class","OutputIterator",",","class","UnaryOperaton","OutputIterator","transform","(","InputIterator","frst","1",",","InputIterator","last","1",",","OutputIterator","result",",","UnaryOperaton","op",")",";","*","*","transform","将","[","frst","1",",","last","1",")","区间","中的","每个","元素","，","传入","函数","op","，","然后","将","返回","的","结果","赋值","给","result","*","*","所","指向","的","元素","但是","这个","算法","有","一个","非常","容易","错误","的","用法","：","transform","(","alues",".","begn","(",")",",","alues",".","en","(",")",",","results",".","en","(",")",",","func",")",";","意在","将","*","*","alues","中的","元素","一一","传入","func","(",")","，","然后","将","返回","值","依次","放","在","results","*","*","的","末尾","。","这个","用法","的","错误","在于","，","*","*","results",".","en","(",")","返回","的","迭","代","器","及其","之后","并没有","指向","任何","元素","，","这样","只","会","给","不存在","的","对象","赋值","。","正确的","用法","是","使用","back","_","nserter","(",")","*","*",".","template","class","Contaner","back","_","nsert","_","teratorContaner","back","_","nserter","(","Contaner","&","amp",";","x",")",";","将","容器","作为","*","*","back","_","nserter","的","参数","可以获得","指向","该","容器","末尾","的","一个","back","_","nsert","_","terator","，","而","这个","末尾","插入","迭","代","器重","载","了","赋值","运算","符","*","*","：","back","_","nsert","_","terator","_","Contaner","&","amp",";","operator","&","#","x","3","D",";","(","typename","_","Contaner",":",":","const","_","reference","_","Val",")","&","#","123",";","contaner","-","push","_","back","(","_","Val",")",";","return","(","*","ths",")",";","&","#","125",";","对","这个","迭","代","器","赋值","，","即","是","向","容器","push","_","back","一个","元素","。","所以","正确的","用法","是","这样","：","transform","(","alues",".","begn","(",")",",","alues",".","en","(",")",",","back","_","nserter","(","results",")",",","func",")",";","相对","的","，","有","尾","插入","就","会","有","头","插入","，","*","*","front","_","nserter","(",")","，","赋值","时会","调用","push","_","front","，","所以","只","能用","在","提供","了","该","方法","的","eque","和","lst","容器","上","*","*","nserter","(",")","则","允许","结果","插入","容器","中的","任意","位置","。","无论","何时","你","使用","一个","要求","指定","目的","区间","的","算法","，","确保","目的","区间","已经","足够","大","或者","在","算法","执行","时","可以","增加","大小","。","如果","你","选择","增加","大小","，","就","使用","插入","迭","代","器","。","条款","31","：","了解","各种","和","排序","有关","的","选择","STL","算法","中用","于","排序","的","算法","不止","*","*","sort","*","*","一个","，","本","条款","介绍","了","另外","的","几个","：","template","class","RanomAccessIterator","o","partal","_","sort","(","RanomAccessIterator","frst",",","RanomAccessIterator","mle",",","RanomAccessIterator","last",",","Compare","comp",")",";","partal","_","sort","将","[","frst",",","last",")","区间","中","，","最好","的","(","mle","-","frst",")","个","元素","，","排","好","序","放","在","容器","的","*","*","[","frst",",","mle",")","区间","中","，","comp","(",")","是","判断","是否","更好","的","方法","。","即","把","最好","的","n","个","元素","按","顺序","放","在","容器","前面","，","其他","的","无序","。","实现","方式","是","通过","堆","排序","*","*","时","，","每次","建","堆","可以获得","一个","最佳","元素","，","持续","n","次","后","，","将","一共","获得","的","n","个","最好","元素","按","顺序","放","在","容器","前面","。","template","class","RanomAccessIterator",",","class","Compare","o","nth","_","element","(","RanomAccessIterator","frst",",","RanomAccessIterator","nth",",","RanomAccessIterator","last",",","Compare","comp",")",";","nth","_","element","这个","算法","和","partal","_","sort","类似","，","但是","放","在","最","前面","的","n","个","元素","不","进行","排序","。","sort","、","partal","_","sort","、","nth","_","element","这","三个","算法","都是","不稳定","的","排序","算法","（","即","不能","保证","值","相同","的","元素","在","排序","前后","的","顺序","）",".","稳定的","排序","算法","是","*","*","stable","_","sort","，","因为","使用","的","归并","排序","*","*","。","template","class","RanomAccessIterator",",","class","Compare","o","stable","_","sort","(","RanomAccessIterator","frst",",","RanomAccessIterator","last",",","Compare","comp",")",";","还有","一个","算法","是","*","*","partton","*","*",":","template","class","BrectonalIterator",",","class","UnaryPrecate","BrectonalIterator","partton","(","BrectonalIterator","frst",",","BrectonalIterator","last",",","UnaryPrecate","pre",")",";","partton","(",")","重","排","[","frst",",","last",")","区间","中的","元素","，","以","使","满足","pre","条件","(","使","pre","返回","true",")","的","元素","都","在","区间","的","开头","，","并","返回","重排","后","第一个","不满足","pre","条件","的","元素","的","迭","代","器","。","*","*","stable","_","partton","则","是","partton","的","稳定","版本","。","算法","sort","、","stable","_","sort","、","partal","_","sort","和","nth","_","element","需要","随机","访问","迭","代","器","，","所以","无法","用于","lst","，","而","lst","提供","了","专属","的","lst",":",":","sort","*","*","用于","稳定","排序","。","条款","32",".","如果","确实","需要","删除","元素","，","则","需要","在","remoe","这","一类","算法","之后","调用","erase","我","在","条款","9","中","说","明了","*","*","st",":",":","remoe","所","做","的","操作","，","它","并不","删除","某个","元素","，","而是","将不","需","被","删除","的","元素","放","在","容器","的","前端","。","类似的","算法","还有","unque","，","用于","删除","相邻","的","重复","元素","，","它","也不","真","的","删除","相邻","重复","元素","，","而是","将","相邻","的","不","重复","元素","放","在","容器","的","前端","，","最后","返回","一个","指向","边界","的","迭","代","器","。","所以","如果","需要","真","的","删除","其它","元素","，","应","该","在","remoe","、","unque","后","调用","erase","*","*",".","条款","33",".","对","包含","指针","的","容器","使用","remoe","这","一类","算法","时要","特别","小心","还是","*","*","st",":",":","remoe","的","问题","，","如果","容器","中的","指针","指向","的","是","动态分配","的","内存","，","在","调用","remoe","时会","导致","一些","指针","丢失","，","导致","内存","泄漏","。","如果","向","容器","中","添加","的","是","智能","指针","，","那","这个问题","就","不存在","了","，","你","可以","放心的","对","容器","使用","erase","-","remoe","*","*","删除","元素","。","条款","34",".","了解","哪些","算法","要求","使用","排序","的","区间","作为","参数","搜索","算法","*","*","bnary","_","search","、","lower","_","boun","、","upper","_","boun","和","equal","_","range","(","详见","条款","45",")","需要","有序","区间","，","因为","它们","使用","二分法","查找","*","*","。","*","*","set","_","unon","、","set","_","ntersecton","、","set","_","fference","和","set","_","symmetrc","_","fference","*","*","都","需要","有序","区间","。","template","class","InputIterator","1",",","class","InputIterator","2",",","class","OutputIterator","OutputIterator","set","_","unon","(","InputIterator","1","frst","1",",","InputIterator","1","last","1",",","InputIterator","2","frst","2",",","InputIterator","2","last","2",",","OutputIterator","result",")",";","set","_","unon","将","两个","有序","区间","中的","元素","合并","，","重复","的","元素","只","保留","一份","。","template","class","InputIterator","1",",","class","InputIterator","2",",","class","OutputIterator","OutputIterator","set","_","ntersecton","(","InputIterator","1","frst","1",",","InputIterator","1","last","1",",","InputIterator","2","frst","2",",","InputIterator","2","last","2",",","OutputIterator","result",")",";","set","_","ntersecton","将","两个","有序","区间","中共","有的","元素","拷贝","一份","template","class","InputIterator","1",",","class","InputIterator","2",",","class","OutputIterator","OutputIterator","set","_","fference","(","InputIterator","1","frst","1",",","InputIterator","1","last","1",",","InputIterator","2","frst","2",",","InputIterator","2","last","2",",","OutputIterator","result",")",";","set","_","fference","将","区间","[","frst","1",",","last","1",")","中","有","但是","区间","*","*","[","frst","2",",","last","2",")","中","没","有","*","*","的","元素","拷贝","到","result","中","。","template","class","InputIterator","1",",","class","InputIterator","2",",","class","OutputIterator","OutputIterator","set","_","symmetrc","_","fference","(","InputIterator","1","frst","1",",","InputIterator","1","last","1",",","InputIterator","2","frst","2",",","InputIterator","2","last","2",",","OutputIterator","result",")",";","set","_","symmetrc","_","fference","将","区间","[","frst","1",",","last","1",")","中","有","但是","区间","*","*","[","frst","2",",","last","2",")","中","没","有","*","*",",","与","区间","*","*","[","frst","2",",","last","2",")","中","有","但是","区间","[","frst","1",",","last","1",")","中","没","有的","元素","都","拷贝","到","result","中","。","这","四个","算法","要求","有序","区间","，","是","为了","保证","线性","时间","复杂度","*","*","。","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/C++/STL/%E7%AE%97%E6%B3%95/","title":"算法","content":"条款30：确保目标区间足够大首先了解标准库中的一个算法：\ntemplate &lt;class InputIterator, class OutputIterator, class UnaryOperation&gt;\nOutputI...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/STL/","name":"STL"},"date":"2021-03-21 20:04:00"},{"word":["条款","26",".","terator","优先","于","const","_","terator","、","reerse","_","terator","及","const","_","reerse","_","terator","先","说","这","四种","迭","代","器","各自","的","功能","对","terator","进行","递增","可以","从","容器","头部","遍历","到","尾部","对","reerse","_","terator","进行","递增","则","可以","从","容器","尾部","遍历","到头","部","const","_","terator","和","const","_","reerse","_","terator","则","是","对","这","两种","迭","代","器","增加","了","常量","性","，","不可","改变","迭","代","器","指向","的","值","再说","它们","之间","的","转换","，","为了","直观","一些","我","做","了","一张","图这","四个","迭","代","器","是","四个","毫无","关联","的","类","(","!","!",")","。","可以","通过","隐式","转换","，","将","非","const","转换","为","const","，","但","const","无法","直接","转换","为","非","const","(","具体","方法","见","下","一","条款",")","。","至于","非","reerse","和","reerse","之间","转换","，","书上","说","非","reerse","可以","隐式","转换","为","reerse","，","但","在","s","2005","的","STL","实现","中","，","已","经由","explct","声明","为","非","隐式","转换","了","，","需要","将","terator","传入","reerse","_","terator","的","构造","函数","转换","为","reerse","迭","代","器","。","而","reerse","转换","为","非","reerse","则","可以","通过","迭","代","器","调用","base","(",")","获得","。","最后","可以说","下","这个","条款","了","，","为什么","要","优先","使用","terator","，","避免","使用","其他","三个","容器","类","中的","很多","成员","函数","形参","类型","都是","terator","，","包括","运算","符","重载","函数","，","传入","其他","三个","无法","隐式","转换","为","terator","类型","的","迭","代","器","，","将","无法","通过","编译","。","而且","混用","不同类型","迭","代","器","，","将","导致","模板","函数","在","类型","推导","时","产生","意料之外","的","编译","问题","。","条款","27",".","使用","stance","和","aance","将","容器","的","const","_","terator","转换","成","terator","上","一","条款","中","提到","，","*","*","const","_","terator","无法","直接","转换","为","terator","。","如果","想要","转换","，","可以","创建","一个","新的","terator","，","先","将它","指向","begn","(",")","，","然后","计算","const","_","terator","和","begn","(",")","之间","的","距离","，","再","将","新的","迭","代","器","移动","相应","距离","，","即可","获得","一个","和","const","_","terator","指向","相同","对象","的","terator","。","想法","很","简单","很","直接","，","实现","通过","stance","(",")","和","aance","(",")","*","*","这","两个","函数","templateclass","InputIterator","typename","terator","_","tratsInputIterator",":",":","fference","_","type","stance","(","InputIterator","frst",",","InputIterator","last",")",";","一长串","的","返回","值","可以","忽略","，","这个","函数","返回","两个","迭","代","器","之间","的","距离","template","class","InputIterator",",","class","Dstance","o","aance","(","InputIterator","&","amp",";","t",",","Dstance","n",")",";","将","迭","代","器","移动","n","个","距离","一起","使用","：","const","_","terator","const","_","t","&","#","x","3","D",";","ec",".","begn","(",")",";",".",".",".","&","#","x","2","F",";","&","#","x","2","F",";","经过","某些","操作","terator","t","&","#","x","3","D",";","ec",".","begn","(",")",";","aance","(","t",",","stanceconst","_","terator","(","t",",","const","_","t",")",")",";","ps",".","因为","*","*","stance","(",")","进行","类型","推导","时","，","迭","代","器","实参","需要","类型","一致","，","所以","通过","const","_","terator","指定","模板","推导","类型","，","terator","隐式","转换","为","const","_","terator","*","*","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/C++/STL/%E8%BF%AD%E4%BB%A3%E5%99%A8/","title":"迭代器","content":"条款26.iterator优先于const_iterator、reverse_iterator及const_reverse_iterator先说这四种迭代器各自的功能对iterator进行递增可以从容器头部遍历到尾部对reverse_...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/STL/","name":"STL"},"date":"2021-03-21 20:03:00"},{"word":["条款","19",".","理解","相等","(","equalty",")","和","等价","(","equalence",")","的","区别","标准","关联","容器","需要","保持","有序","，","所以","每个","容器","必须","有","一个","定义","了","怎么","保持","东西","有序","的","比较","函数","(","默认","是","less",")","。","以","set","举例","，","*","*","setstrng","*","ssp","*","*","是","setstrng","*",",","lessstrng","*",",","allocatorstrng","*","ssp","的","简写","。","第三个","参数","分配器","不是","这章","讨论","的","问题","。","我们","看","第二个","参数","lessstrng","*",",","这是","一个","仿","函数","（","通过","重载","类","的","(",")","运算","符","，","模仿","函数","的","调用","）","，","是","用于","判断","set","中","元素","是否","等价","的","比较","函数","。","等价","不同于","相等","，","是","关联","容器","所","引入","的","概念","，","即","在","排序","顺序","上","，","如果","两个","元素","各自","都","不","应该","排","在","另一个","的","前面","，","则这","两个","元素","是","等价","的","。","在","set","类","中","，","将","比较","函数","typeef","为","key","_","compare",".","判断","是否","等价","的","判别式","为","*","*","!","c",".","key","_","compare","(",")","(","x",",","y",")","&","amp",";","&","amp",";","!","c",".","key","_","compare","(",")","(","y",",","x",")",".","当","keycompare","(",")","为","less","时","，","key","_","compare","(",")","(","x",",","y",")","只","有","在","x","不","小于","y","时","返回","false","，","key","_","compare","(",")","(","y",",","x",")","只","有","在","y","不","小于","x","时","返回","false",".","所以","只","有","x","和","y","相等","时","该","判别式","为","true","，","视","该","两","元素","等价","，","关联","容器","中","不会","保存","两个","等价","的","元素","*","*","。","ps",".","set","的","第二个","参数","使用","仿","函数","，","是","因","为","set","模版","第二个","参数","是","数据类型","，","用于","模板","具","现化","，","不","接收","函数","指针","。","条款","20",".","为","包含","指针","的","关联","容器","指定","比较","类型","考虑","下面","这","段","代码","，","向","一个","set","中","放入","指针","对象","setstrng","*","ssp",";","ssp",".","nsert","(","new","strng","(","&","quot",";","Anteater","&","quot",";",")",")",";","ssp",".","nsert","(","new","strng","(","&","quot",";","Wombat","&","quot",";",")",")",";","ssp",".","nsert","(","new","strng","(","&","quot",";","Lemur","&","quot",";",")",")",";","ssp",".","nsert","(","new","strng","(","&","quot",";","Pengun","&","quot",";",")",")",";","默认","的","比较","函数","会","作","用于","指针","值","，","即","地址","，","将","指针","按","地址","大小","排序","，","而不是","根据","指针","所","指向","的","内容","进行","排序","如果","希望","容器","中","根据","指针","所","指向","的","内容","排序","，","则","需要","为","其","指定","特殊的","比较","函数","struct","StrngPtrLess",":","publc","bnary","_","functonconst","strng","*",",","const","strng","*",",","bool","&","#","123",";","bool","operator","(",")","(","const","strng","*","ps","1",",","const","strng","*","ps","2",")","const","&","#","123",";","return","*","ps","1","*","ps","2",";","&","#","125",";","&","#","125",";",";","ps",".","继承","自","*","*","bnary","_","functonconst","strng","*",",","const","strng","*",",","bool","的","原因","详见","条款","40","（","该","基类","也是","less","的","基类","*","*","）","创建","关联","容器","时","指定","该","比较","函数","setstrng","*",",","StrngPtrLess","ssp",";","然后","这个","容器","内","的","元素","就是","按照","指针","所","指向","的","元素","进行","排序","了","ps",".","在","输出","时","如果","不想","使用","*","*","ter","，","可以","写","一个","输出","函数","prnt","，","使用","foreach","(",")","，","对","每个","元素","调用","prnt","o","prnt","(","const","strng","*","ps",")","&","#","123",";","cout","*","ps","enl",";","&","#","125",";","for","_","each","(","ssp",".","begn","(",")",",","ssp",".","en","(",")",",","prnt",")",";","条款","21",".","总是","让","比较","函数","在","等值","情况","下","返回","false","条款","19","中","，","*","*","less","相当于","”","”",",","而","*","*","less","_","equal","*","*","相当于","”","=","”","，","如果","比较","函数","*","*","key","_","compare","*","*","指定","为","*","*","less","_","equal","*","*","，","则","在","判别式","*","*","!","c",".","key","_","compare","(",")","(","x",",","y",")","&","amp",";","&","amp",";","!","c",".","key","_","compare","(",")","(","y",",","x",")","*","*","中","，","*","*","!","c",".","key","_","compare","(",")","(","x",",","y",")","*","*","在","x","=","=","y","时","返回","false",",","*","*","!","c",".","key","_","compare","(",")","(","y",",","x",")","在","x","=","=","y","时","也","返回","false",",","则","判断","为","x",",","y","不","等价","，","set","中","就","会","插入","值","相等","的","x","与","y","，","这","会","破坏","set","的","容器","结构","。","条款","22",".","切勿","直接","修改","set","或","multset","中的","键","本","条款","中","没有","一并","提及","map","和","multmap","，","因为","*","*","mapK",",","V","中","元素","类型","为","parconst","K",",","V","，","对","键","的","更改","无法","通过","编译","。","而","set","和","multset","用于","排序","的","键","可","由","迭","代","器","访问","更改","其","值","，","这","会","破坏","set","中","元素","的","有序性","。","如果","想要","更改","set","中用","于","排序","的","键","，","应","先","通过","迭","代","器","将","对象","拷贝","，","再","erase","容器","中的","该","元素","，","然后","更改","拷贝","对象","的","键值","，","最","将","该","拷贝","nsert","*","*","入","容器","。","条款","23",".","考虑","用","排序","的","ector","替代","关联","容器","map","中","单个","元素","占用","的","内存","比","ector","中","多","，","因为","map","要","额外","维护","指向","两","个子","节点","和","指向","父","节点","的","三个","指针","。","所以","元素","很多","时","map","要","比","ector","多","占用","很多","内存","。","如果","程序","中","使用","的","容器","只","在","很","短的","阶段","进行","数据","的","插入","和","删除","，","而","大多数","的","阶段","是","在","进行","查询","和","修改","，","使用","ector","性能","会","更好","。","容器","完成","插入","阶段","后","，","进行","排序","。","有序","容器","可以","正确地","使用","查找","算法","—","—","*","*","bnary","_","search","、","lower","_","boun","、","equal","_","range","等","（","参见","条款","34","）","。","而且","一个","有序","ector","的","二分法","查找","(","通过","下标","访问",")","比","一个","二叉","树","的","二分法","查找","(","通过","指针","迭","代",")","提供","了","更好","的","性能","*","*","。","条款","24",".","当","效率","至关重要","时","，","请","在","map",":",":","operator","[","]","与","map",":",":","nsert","之间","谨慎","做出","选择","map",":",":","operator","[","]","被","设计","为","简化","”","添加","或","更新","”","功能","。","map",":",":","operator","[","]","会","生成","一个","临时","对象","，","只","赋","键值","，","nsert","入","map","中","，","无论是","否","已经","有","该","键值","了","，","nsert","都会","返回","*","*","parterator",",","bool","对象","，","这个","返回","值","中的","frst","变量","会","指向","拥有","该","唯一","键值","的","元素","，","然后","将","operator","[","]","等号","右侧","的","值","赋","给","该","变量","*","*",".","当","map","中","已经","有","该","键值","时","，","operator","[","]","性能","不如","nsert","，","因为","在","构造","时","并没有","给","新的","元素","赋值","，","而是","在","构造","之后","赋","的","值","。","如果","你","要","更新","已","存在","的","map","元素","，","operator","[","]","更好","，","但","如果","你","要","增加","一个","新","元素","，","nsert","则","有","优势","。","条款","25",".","熟悉","非标准","的","散","列","容器","散","列","容器","，","即","基于","哈希表","(","Hash","Table",")","实现","的","容器","。","本","书","作","于","2001年","，","当时","C++","标准","委员会","标准","委员","为了","不","过度","地","推迟","标准","的","完成","，","将","散","列","容器","放","在","了","标准","的","下一个","版本","中","。","即","C++","11","中","，","增加","了","散","列","容器","*","*","unorere","_","set","和","unorere","_","map","*","*","散","列","容器","中","元素","并","不是","有序","的","，","所以","并没有","等价","的","概念","，","默认","比较","函数","为","equal","_","to","。","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/C++/STL/%E5%85%B3%E8%81%94%E5%AE%B9%E5%99%A8/","title":"关联容器","content":"条款19.理解相等(equality)和等价(equivalence)的区别标准关联容器需要保持有序，所以每个容器必须有一个定义了怎么保持东西有序的比较函数(默认是less)。以set举例，**set&lt;string*&gt; s...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/STL/","name":"STL"},"date":"2021-03-21 20:02:00"},{"word":["条款","13",".","ector","和","strng","优先","于动态分配","的","数组","使用","new","来","动态分配","内存","后","有","三","项","需要","承担","的","责任","，","在","使用","完","资源","后","通过","elete","释放","内存","，","并","与","new","的","形式","配对","（","elete","or","elete","[","]","）","，","以及","确保","只","elete","了","一次","。","或是","出于","开发","效率","或是","出于","其他","原因","，","ector","和","strng","可以","使","你","不必","承担","这些","责任","，","ector","和","strng","会","自己","管理","内存","（","RAII","方法","，","详见","Effecte","C++","条款","13","）","，","当","他们","被","析构时","，","会","自动","析构","容器","中","元素","的","内存","。","而且","ector","和","strng","是","功能","完全","的","STL","序列","容器","，","有","很多","的","成员","方法","、","迭","代","器","及","中的","算法","都","可以","使用","。","条款","14",".","使用","resere","来","避免","不必要的","重新","分配","说","resere","之前","需要","先","了解","ector","和","strng","作为","可变","长度","数组","，","是","如何","实现","长度","可变","的","。","在","这个问题","上","这","两个","容器","是","相同","的","，","以下","就","以","ector","来","说明","。","在","ector","被","创建","出","来时","，","它","占有","一定","大小","的","内存","，","这个","大小","由","STL","的","实现","方式","决定","。","每当","需要","更多","空间","时","，","它","会","重新","申请","一片","原来","两倍","大的","内存","（","在","大多","数","实现","中","是","这样","）","，","然后","将","容器","内","的","所有","元素","从","旧","内存","拷贝","到","新","内存","中","，","然后","析构掉","旧","内存","中的","对象","并","释放","旧","内存","。","可以","想象","，","每次","改变","长度","这","一系列","操作","，","尤其是","长度","已经","很","长","时","，","是","很","耗时","的","，","而且","这","一","操作","可能发生","在任","何","一次","添加","元素","时","。","所以","如果","你想","创建","一个","ector","，","并","向","其","中","放","入","1000个","随机","数","，","你","可能会","通过","循环","，","将","数一一","push","_","back","放入","其中","。","那么","在","这个","过程","中","，","这个","ector","可能","进行","了","7","-","8","或者","更","多次","内存","申请","及","拷贝","（","这要","取决于","STL","实现","方式","了","）","，","最先","放入","其","中的","数","也","被","无效","拷贝","了","7","-","8次","，","那么","现在","可以","说说","resere","了","。","o","resere","(","sze","_","type","n",")",";","用于","请求","改变","容器","的","现有","长度","。","如果","实参","n","大于","现有","容器","capacty","(",")","，","容器","会","重新","申请","长度","为","n","个","元素","长度","的","内存","进行","拷贝","，","否则","不会","发生","任何事","。","所以","在","已知","要","放入","1000个","元素","时","，","可以","在","放入","元素","之前","，","先","通过","resere","(",")","将","容器","的","内存","长度","改","变为","1000个","元素","的","内存","长度","，","再","向","其中","放入","元素","，","这样","在","push","_","back","的","过程","中","不会","发生","长度","改变","，","也","就","不会","执行","上述","无效","的","内存","拷贝","。","当然","，","可以","在","一开始","多","申请","一些","预留","空间","，","至于","多余的","容量","如何","去除","，","详见","条款","17",".","条款","15",".","注意","strng","实现","的","多样性","strng","有","很多","种","常见的","实现","方式","，","但","几乎","每个","实现","版本","都","包含","以下","信息","：","字符串","的","大小","(","sze",")","、","容量","(","capacty",")","和","值","(","即","构成","该","字符串","的","字符",")","，","可能","还","会","有","分配器","的","拷贝","(","allocator",")","和","对","值","的","引用","计数","。","这些","成员","的","存储","结构","决定","了","strng","的","大小","，","了解","strng","的","实现","多样性","，","然后","在","应当","忽略","细节","时","忽略","，","应该","考虑","时","考虑","。","条款","16",".","了解","如何","把","ector","和","strng","数","据传","给","旧的","APIector","中的","元素","是","存储","在","连续","的","内存","中","，","就","像","数组","一样","，","所以","可以","通过","*","*","&","amp",";","[","0","]","获取","指向","第","一个","元素","的","指针","。","而","strng","中的","数据","不一定","存储","在","连续","的","内存","中","，","要","通过","成员","函数","c","_","str","(",")","*","*","获取","指向","字符串","值","的","指针",".","条款","17",".","使用","“","swap","技巧","”","除去","多余的","容量","这","条","是","接着","条款","14","说","。","ector","的","构造","函数","有","一个","特点","，","会","以","被","拷贝","的","ector",".","sze","(",")","申请","自己","新的","内存大小","。","所以","可以","通过","*","*","ectortype","(","OlVec",")","将","旧","ector","中的","元素","拷贝","到","新的","容器","中","，","且","新的","容器","容量","为","元素","的","个数","。","然后","通过","ector",":",":","swap","(",")","*","*","将","新旧","ector","数据","交换","，","即","完成","了","将","旧","ector","中","多余","容量","的","除去","。","ectortype","(","OlVec",")",".","swap","(","OlVec",")",";","用于","除去","多余","容量","的","swa","技巧","同样","的","技巧","对","strng","适用","。","题外","话","，","swap","技巧","也","可以","用来","清除","容器","并","释放","空间","ectortype","(",")",".","swap","(","OlVec",")",";","用于","清除","容器","我","看","了","下","，","和","ector",":",":","clear","(",")","的","区别","是","clear","(",")","不","将","容量","清","空","。","条款","18",".","避免","使用","ectorbool","现在","的","ectorbool","是","一个","历史","实验","的","失败","产物","。","bool","类型","的","值","无非","真","或","假","(","1","或","0",")","，","所以","1个","bt","位","就","可以","保存","，","而","不需要","1","整个","字节","(","8","bt",")",",","所以","C++","标准","委员会","在","ectorbool","的","实现","中","尝试","了","代理","对象","(","详见","More","Effecte","C++","条款","30",")","，","即将","8个","bool","值","保存","在","1个","字节","中","，","ectorboo",":",":","operator","[","]","返回","的","是","一个","代理","对象","的","引用","，","这个","代理","对象","表现","的","像","一个","正常的","bool","对象","，","但","这个","代理","对象","的","类型","是","*","*","ectorbool",":",":","reference","。","所以","你","无法","将","一个","bool","类型","的","指针","指向","ectorbool","中","第","一个","元素","的","地址","，","这","将","导致","很多","模板","不能","正常","使用","*","*","。","一个","替代","的","方案","是","equebool","，","但","eque","在","内存","中","不是","连续","的","，","无法","完成","条款","16","中","所","述","任务","。","另一个","替代","的","方案","是","st",":",":","btset",",","它","与","ectorbool","存储","bool","值","的","方式","相同","，","区别","在于","，","它","不是","个","STL","容器","，","不会","引起","模版","的","误用","。","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/C++/STL/vector%E5%92%8Cstring/","title":"vector和string","content":"条款13.vector和string优先于动态分配的数组使用new来动态分配内存后有三项需要承担的责任，在使用完资源后通过delete释放内存，并与new的形式配对（delete or delete[]），以及确保只delete了一次...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/STL/","name":"STL"},"date":"2021-03-21 20:01:00"},{"word":["条款","1",".","慎重","选择","容器","类型","标准","STL","序列","容器","：","ector","、","strng","、","eque","和","lst","标准","STL","关联","容器","：","set","、","map","、","multset","和","multmap","非标准","的","关联","容器","：","hash","_","set","、","hash","_","multset","、","hash","_","map","和","hash","_","multmap","标准","的","非","STL","容器","：","数组","、","btset","、","alarray","、","stack","、","queue","和","prorty","_","queue","另一种","分类","：","连续","内存","容器","(","元素","存放","在","一块","或","多","块","内存","中","，","每","块","内存","中","存有","多","个","元素",")","：","ector","、","strng","和","eque","基于","节点","的","容器","(","每","块","内存","存放","一个","元素",")","：","lst","和","所有","标准","的","关联","容器","条款","2",".","不要","试图","编写","独","立于","容器","类型","的","代码","序列","容器","与","关联","容器","数据结构","不同","，","所","提供","的","操作","也","不同","。","序列","容器","支持","push","_","front","或","push","_","back","，","但","关联","容器","不支持","。","关联","容器","提供","对数","时间","复杂度","的","lower","_","boun","、","upper","_","boun","和","equal","_","range","成员","函数","，","但","序列","容器","却","没有","。","写","既要","和","序列","容器","又","要","和","关联","容器","一起","工作","的","代码","并没有","什么","意义","。","很多","成员","函数","(","包括","运算","符","重载",")","只","存","在于","其中","一类","容器","中","。","条款","3",".","确保","容器","中的","对象","拷贝","正确","且","高效","当","你","向","容器","中","添加","一个","对象","（","比如","通过","nsert","或","push","_","back","等","）","，","进入","容器","的","是","你","指定","的","对象","的","拷贝","，","如果","你","从","ector","、","strng","或","eque","中","插入","或","删除","了","什么","或","使用","了","任何","排序","算法","，","现有","的","容器","元素","会","移动","（","拷贝","）","。","因此","把","一个","派生","类","对象","插入","基类","对象","的","容器","会","导致","派生","部分","被","删除","，","而且","容器","中","如果","放","的","对象","拷贝","过程","很","昂贵","，","元素","的","移动","会","成为","性能","瓶颈","，","所以","使","拷贝","更","高效","、","正确","而且","对","分割","问题","免疫","的","简单的","方式","是","建立","指针","的","容器","而不是","对象","的","容器","。","但是","指针","容器","也","有","自己","的","问题","，","详见","条款","7","和","条款","33","。","条款","4",".","调用","empty","(",")","而不是","检查","sze","(",")","是否","为","0","empty","的","典型","实现","是","一个","返回","sze","(",")","=","=","0","结果","的","内联","函数","。","对于","所有","的","标准","容器","，","empty","是","一个","常数","时间","的","操作","，","但","对于","一些","lst","实现","，","sze","花费","线性","时间","。","lst","中","有","一个","变量","用于","记录","元素","个数","。","特殊的","是","，","lst",":",":","splce","(",")","用于","拼接","两个","lst","，","为了","达到","splce","的","高","效率","，","在","splce","时","可能","不","更新","sze","，","而","在","调用","sze","时","遍历","lst","计算","sze","，","这","就","会","导致","sze","(",")","花费","线性","时间","而不是","常数","时间","。","但书","中","没有","说","empty","(",")","为什么","一定","是","常数","时间","。","所以","我","看","了","下","我","所用","的","QT","中","lst",":",":","empty","(",")","的","实现","方式","，","发现","lst","是","由","循化链表","实现","的","，","empty","(",")","的","实现","是","判","断头","节点","的","下","个","节点","是否","还是","头","结点","，","因此","为","常数","时间","。","所以","我","的","理解","是","：","由于","STL","的","实现","方式","不同","，","empty","(",")","的","效率","比","0","=","=","sze","(",")","更加","稳定","(","如","循环","链表","实现","的","Lst",")","。","条款","5",".","区间","成员","函数","优先","于与之","对应","的","单元","素","成员","函数","本文","以","nsert","的","单元","素","版本","和","区间","版本","说明","，","区间","成员","函数","优点","有","三","：","省去","了","没有必要","的","函数","调用","，","调用","1次","与","调用","n","次","，","即使","将","单","元素","版本","声明","为","内联","，","也","有可能","不会","成为","内联","。","每次","nsert","单","元素","，","要","将","插入","位置","后","的","所有","元素","进行","移动","，","进行","拷贝","，","区间","nsert","则","先","算","好","一共","要","插入","的","总数","，","然后","将","插入","位置","后","的","元素","只","整体","挪动","一次","看","原因","3","前","需要","先","看","Part","2",".","条款","14","中","，","了解","序列","容器","插入","元素","时","内存","的","重新","分配","机制","。","多次","插入","单","元素","可能","导致","内存","多次","重新","分配","，","而","区间","插入","则","一次性","分配","足够","的","空间","，","然后","进行","插入","。","常用","区间","成员","函数","整理","：","区间","构造","：","contaner",":",":","contaner","(","InputIterator","begn",",","InputIterator","en",")",";","begn","和","en","为","旧","容器","中","，","被","拷贝","区间","的","起始","区间","插入","：","序列","容器","：","o","contaner",":",":","nsert","(","terator","poston",",","InputIterator","begn",",","InputIterator","en",")",";","关联","容器","：","o","contaner",":",":","nsert","(","lnputIterator","begn",",","InputIterator","en",")",";","&","#","x","2","F",";","&","#","x","2","F",";","关联","容器","使用","自己","的","比较","函数","决定","插入","元素","放","在","哪","begn","和","en","为","旧","容器","中","，","要","插","到","新","容器","中的","区间","起始","poston","为","新","容器","中","，","要","插入","位置","的","迭","代","器","，","新","元素","插入","到","该","迭","代","器","之前","区间","删除","：","C++","11","以上",":","terator","contaner",":",":","erase","(","terator","begn",",","terator","en",")",";","C++","11","以下",":","关联","容器","erase","(",")","返回","值","o","将","容器","中","[","begn",",","en",")","前","闭","后","开","区间","内","的","元素","删除","区间","赋值","：","o","contaner",":",":","assgn","(","InputIterator","begn",",","InputIterator","en",")",";","begn","和","en","为","旧","容器","中","，","被","拷贝","区间","的","起始","条款","6",".","当心","C++","编译器","最","烦人的","分析","机制","按照","条款","5","中","所说","，","尝试","使用","lst","的","区间","构造","，","以","一个","文件","中的","全部内容","构造","一个","lst","对象","ata","fstream","ataFle","(","&","quot",";","nts",".","at","&","quot",";",")",";","lstnt","ata","(","stream","_","teratornt","(","ataFle",")",",","stream","_","teratornt","(",")",")",";","上面","这","段","代码","乍一看","好像","没有","问题","，","从","文件","的","begn","开始","，","一","直","迭","代","到","NULL","，","即","文件","末尾","，","以此","区间","内","的","元素","构造","对象","ata","。","但是","编译器","会","将","第二句","代码","解析","为","一个","函数","声明","。","问题","出","在","构造","时","使用","了","一个","匿名","迭","代","器","。","目前","最好","的","解决","方式","，","是","在","数据","声明","中","避免","使用","匿名","迭","代","器","对象","。","fstream","ataFle","(","&","quot",";","nts",".","at","&","quot",";",")",";","stream","_","teratornt","ataBegn","(","ataFle",")",";","stream","_","teratornt","ataEn",";","lstnt","ata","(","ataBegn",",","ataEn",")",";","条款","7",".","如果","在","容器","中","包含","了","通过","new","操作","创建","的","指针","，","切记","在","容器","对象","析构","前","将","指针","elete","掉","可以","通过","遍历","容器","释放","指针","，","这样","做","能行","，","但","不是","异常","安","全的","。","如果","在","向","容器","中","放入","和","释放","指针","时有","异常","抛出","，","同样","会","有","资源","泄露","。","所以","最","安全的","做法","是","用","引用","计数","智能","指针","（","如","Boost",":",":","share","_","ptr","）","容器","代替","指针","容器","。","ps",".","不要","创建","auto","_","ptr","的","容器","，","并","指望","其中","的","指针","被","自动","删除","，","详见","下","一","条款","条款","8",".","切勿","创建","包含","auto","_","ptr","的","容器","对象","auto","_","ptr","最大","的","古怪","在于","它","的","拷贝","构造","和","赋值","操作","符","，","会","将","被","拷贝","的","指针","置","为","NULL","。","STL","算法","中的","sort","(",")","采用","的","快速","排序","算法","，","会","用","临时","对象","拷贝","ector","中的","值","作为","基准","值","。","这","将","导致","ector","调用","sort","(",")","时","，","其","中的","值","被","临时","对象","拷贝","，","ector","中的","值","被","置","为","NULL","，","临时","对象","在","作用","域","结束","时","释放","了","该","auto","_","ptr","。","*","*","ps",".","*","*","C++","标准","委员会","做","了","很多","使","ector","不","被","编译","通过","，","并","最终","在","C++","11","中","移","除","了","auto","_","ptr",".","条款","9",".","慎重","选择","删除","元素","的","方法","9.1.1",".","对于","连续","内存","的","容器","(","ector","、","euqe","和","strng",")","，","删除","元素","的","最好","办法","是","使用","erase","-","remoeec",".","erase","(","st",":",":","remoe","(","ec",".","begn","(",")",",","ec",".","en","(",")",",","alue",")",",","ec",".","en","(",")",")",";","erase","-","remoe","讲解","：","先","要说","一下","erase","和","remoe","，","st",":",":","remoe","(","Itertor","frst",",","Itertor","last",",","const","T","&","amp",";","al",")",";","是","algorthm","中的","算法","，","通过","传入","的","迭","代","器","确定","容器","遍历","区间","，","将","区间","中","不等于","al","的","元素","依次","拷贝","到","区间","中的","前端","。","完成","遍历","之后","即","确定","了","一段","由","frst","起始","，","没有","al","值","的","新","区间","，","最后","返回","该","新","区间","后","一个","位置","的","迭","代","器","terator","erase","(","terator","frst",",","terator","last",")",";","将","前","开","后","闭","区间","[","frst",",","last",")","中的","元素","删除","，","返回","last","erase","-","remoe",":","先","通过","remoe","将","容器","遍历","，","将不","等于","alue","值","的","元素","放","在","容器","前端","新","区间","再","将","新","区间","后","一个","位置","的","迭","代","器","和","容器","的","en","(",")","传入","erase","，","将","新","区间","以外","的","部分","删除","9.1.2",".","对于","lst","，","erase","-","remoe","同样","适用","，","但","lst",":",":","remoe","(",")","更","有效","(","详见","条款","44",")","lst",".","remoe","(","alue",")",";","从","lst","中","移","除","所有","值","等于","alue","的","元素","9.1.3",".","对于","关联","容器","(","set","、","multset","、","map","、","multmap",")","，","删除","元素","正确","且","高效","的","方法","是","调用","erase","（","高效","的","原因","详见","条款","19","）","，","不要","对","关联","容器","使用","st",":",":","remoe","（","详见","条款","22","）","set",".","erase","(","alue",")",";","从","set","中","删除","所有","值","为","alue","的","元素","（","multset","中","也是","删除","所有","）","ps",".","书中","提到","，","序列","容器","erase","会","返回","下一个","位置","的","迭","代","器","，","而","关联","容器","erase","返回","o","，","所以","序列","容器","可以","通过","ter","=","ec",".","erase","(","ter",")","获得","erase","后","有效的","迭","代","器","，","而","关联","容器","则要","通过","set",".","erase","(","ter","+","+",")","后置","+","+","的","方式","获得","。","不","过","我","在","QtCreator","和","VsualStuo","2005两个","编译器","都","试","了","下","，","关联","容器","erase","的","返回","值","已经","是","下一个","元素","的","迭","代","器","了","，","两种","容器","可以","都","通过","ter","=","ec",".","erase","(","ter",")","有效","迭","代","，","但","对于","序列","容器","不要","使用","ec",".","erase","(","ter","+","+",")",",","因为","序列","容器","调用","erase","后","，","会","使","被","删除","元素","之后","所","有的","迭","代","器","失效","（","虽然","QtCreator","对此","有","优化","，","但","在","sual","stuo","中","的确如此","，","还是","不要","这么","使用","的","好","）","。","9.2",".","要","删除","容器","中","满足","特定","判别式","的","所有","对象","，","序列","容器","使用","erase","-","remoe","_","f","，","lst","使用","lst",":",":","remoe","_","f","，","关联","容器","使用","遍历","+","erase","(","没有","erase","_","f",")","bool","baalue","(","nt",")",";","&","#","x","2","F",";","&","#","x","2","F",";","特定","判别式","ec",".","erase","(","st",":",":","remoe","_","f","(","ec",".","begn","(",")",",","ec",".","en","(",")",",","baalue",")",")",";","序列","容器","，","遍历","ec","，","删除","使","baalue","返回","true","的","对象","lst",".","remoe","_","f","(","baalue",")",";","lst",":",":","remoe","_","f","是","删除","使","baalue","返回","true","的","对象","的","最好","办法","for","(","auto","ter","&","#","x","3","D",";","set",".","begn","(",")",";","ter","!","&","#","x","3","D",";","set",".","en","(",")",";","&","#","x","2","F",";","*","for","第三个","参数","什么","也不","做","*","&","#","x","2","F",";",")","&","#","123",";","f","(","baalue","(","*",")",")","set",".","erase","(","ter","+","+",")",";","else","+","+","ter",";","&","#","125",";","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/C++/STL/%E5%AE%B9%E5%99%A8/","title":"容器","content":"条款1. 慎重选择容器类型标准STL序列容器：vector、string、deque和list标准STL关联容器：set、map、multiset和multimap非标准的关联容器：hash_set、hash_multiset、has...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/STL/","name":"STL"},"date":"2021-03-21 20:00:00"},{"word":["状态","模式","：","一种","行为","型","设计","模式","应用","场景","：","状态","模式","主要","应用于","对象","有","很多","状态","，","每种","状态","下","有","不同的","表现","，","而且","在","程序","运行","过程","中","会","频繁","变化","状态","，","进而","变化","变现","的","情景","。","(","程序","运行","过程","中","是否","会","频繁","变化","状态","，","是","状态","模式","与","策略","模式","本质上","的","区别",")","举例","：","以","一个","钟表","举例","，","假设","其","有","4种","状态","，","上午","、","下午","、","傍晚","和","午夜","模式","，","不同的","模式","下","灯光","显示","不同","。","比较","简单的","实现","方式","是","使用","枚举","，","在","钟表","的","展示","方法","中","通过","枚举","判断","当前","的","模式","，","然后","调用","该","模式","对应","的","显示","方法","。","但是","如果","状态","很多","，","判断","枚举","类型","时","的","f","-","else","或","swtch","-","case","会","很","庞大","，","而且","难于","维护","。","此时","可以","考虑","将","每种","状态","对应","的","表现","封装","成","一个","状态","类","，","所有","状态","类","继承","自","同一个","基类","，","并提","供","统一","的","展示","接口","。","然后","在","钟表","类","中","保存","一个","状态","指针","，","通过","设置","该","状态","指针","，","调用","不同","状态","类","的","展示","接口","。","这种","消除","分支","语句","的","方式","，","和","工厂","模式","类似","。","实现","方式","：","状态","基类","中","提供","统一","设置","状态","与","展示","的","接口","。","各","状态","类","中","重","写","展示","接口","，","实现","各自","的","展示","方法","。","钟表","类","中","保存","一个","状态","类","对象","的","指针","，","钟表","展示","时调","用","该","状态","类","指针","的","展示","方法","。","状态","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","class","Clock",";","&","#","x","2","F",";","&","#","x","2","F",";","时钟","的","状态","属性","class","StateForClock","&","#","123",";","publc",":","rtual","o","Show","(","Clock","*","pClock",")","&","#","x","3","D",";","0",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","时钟","类","class","Clock","&","#","123",";","publc",":","Clock","(",")",":","m","_","pState","(","NULL",")","&","#","123",";","&","#","125",";","~","Clock","(",")","&","#","123",";","f","(","m","_","pState",")","&","#","123",";","elete","m","_","pState",";","m","_","pState","&","#","x","3","D",";","NULL",";","&","#","125",";","&","#","125",";","o","SetState","(","StateForClock","*","pState",")","&","#","123",";","f","(","!","m","_","pState",")","&","#","123",";","elete","m","_","pState",";","&","#","125",";","m","_","pState","&","#","x","3","D",";","pState",";","&","#","125",";","o","Show","(",")","&","#","123",";","m","_","pState","-","Show","(","ths",")",";","&","#","125",";","prate",":","StateForClock","*","m","_","pState",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","午夜","状态","class","MNghtState",":","publc","StateForClock","&","#","123",";","publc",":","rtual","o","Show","(","Clock","*","pClock",")","&","#","123",";","cout","&","quot",";","MNght","Moe","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","上午","状态","class","NoonState",":","publc","StateForClock","&","#","123",";","publc",":","rtual","o","Show","(","Clock","*","pClock",")","&","#","123",";","cout","&","quot",";","Noon","Moe","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","下午","状态","class","AfterNoonState",":","publc","StateForClock","&","#","123",";","publc",":","rtual","o","Show","(","Clock","*","pClock",")","&","#","123",";","cout","&","quot",";","AfterNoon","Moe","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","晚上","状态","class","NghtState",":","publc","StateForClock","&","#","123",";","publc",":","rtual","o","Show","(","Clock","*","pClock",")","&","#","123",";","cout","&","quot",";","Nght","Moe","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","Clock","oClock",";","oClock",".","SetState","(","new","NoonState","(",")",")",";","oClock",".","Show","(",")",";","oClock",".","SetState","(","new","AfterNoonState","(",")",")",";","oClock",".","Show","(",")",";","oClock",".","SetState","(","new","MNghtState","(",")",")",";","oClock",".","Show","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","Noon","Moe","AfterNoon","Moe","MNght","Moe","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/","title":"状态模式","content":"状态模式：一种行为型设计模式\n应用场景：状态模式主要应用于对象有很多状态，每种状态下有不同的表现，而且在程序运行过程中会频繁变化状态，进而变化变现的情景。(程序运行过程中是否会频繁变化状态，是状态模式与策略模式本质上的区别)\n举例：以...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:59:32"},{"word":["简介","中介","者","模式","：","一种","行为","型","设计","模式","应用","场景","：","一般来说","，","大型","的","软件","在","开发","的","过程","中","会","使用","模块化","的","开发","方式","。","以","我","现在","参与","的","项目","举例","，","完整的","软件","包括","交互","、","检索","、","算路","、","引导","等等","多","个","模块","，","这样","有利于","模块","之间","的","独立","开发","，","提高","整体","开发","效率","。","但是","无论","模块","之间","如何","独立","，","总是","会","有","需要","模块","间","通信","的","时候","。","例如","用户","通过","界面","交互","，","发起","检索","，","这个","过程","需要","交互","与","检索","两","模块","间","通信","，","将","用户","的","意图","由","交互","模块","传递","至","检索","模块","。","这","就","会","产生","一个","扩展性","上","的","问题","。","如果","模块","有","很多","，","且","每个","模块","都","向外","提供","了","唯一","的","接收","消息","的","接口","，","那么","一个","模块","如果","需要","与其","他","所有","模块","通信","，","则","需要","记录","其他","所有","模块","的","通信","接口","，","同理","每个","模块","都","要","记录","所有","与","自己","相关","联","的","模块","的","通信","接口","。","首先","这","就是","一件","很","冗余","并","降低","开发","效率","的","事情","。","其次","，","一旦","有","一天","，","某个","模块","修改","了","自己","所","提供","的","通信","接口","，","或者","增加","了","一个","新","模块","，","尤其是","后者","，","在","公司","项目","发展过程","中","是","很","正常的","事情","。","那么","所有","模块","关于","其他","模块","通信","接口","的","记录","可能","都","需要","修改","或","增加","，","这","在","拥有","庞大","模块","数","量","的","项目","中","，","是","很","恐怖的","事情","。","此时","可以","考虑","中介","者","模式","。","举例","：","假设","现在","有","3个","模块","A","B","C","，","MessageAB","是","A","B","间","双向","传递","的","一个","消息","，","同理","还有","MessageAC","、","MessageBC","。","引入","一个","中介","者","，","它","手中","记录","着","各","模块","的","通信","接口","与","通信协议","，","协议","即","是","一种","约定","，","A","B","两","模块","间","约定","通过","MessageAB","来","传递","某种","信息","，","即","是","这","两","模块","间","的","一个","协议","。","模块","间","通信","都","将","消息","发给","中介","者","，","中介","者","无需","关注","消息","具体","用来","传递","什么","信息","，","只","需要","关注","协议","双方","，","通过","正确的","通信","接口","转发","消息","，","确保","消息","的","转发","对象","正确","即可","，","而","消息","的","解析","处理","在","接收","模块","内部","进行","。","这样","如果","有","通信","接口","修改","或","增加","新","模块","，","协议","双方","将","新","协议","告知","中介","者","记录","即可","。","实现","方式","：","中介","者","对象","中","需要","保存","所有","需","转发","消息","的","模块","指针","作为","成员","变量","。","各","模块","类","中","也","需要","保存","负责","转发","消息","的","中介","者","指针","作为","成员","变量","。","各","模块","类","中","需要","实现","发送","与","接收","消息","的","方法","。","模块","发送","消息","时调","用","中介","者","的","转发","接口","，","中介","者","确定","接收","目标","后","调用","目标","的","接收","接口","。","下面","代码","中","为了","简化","协议","，","我","统一","了","各","模块","接收","消息","的","接口","名称","。","中介","者","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","*","*","约定","三种","协议","*","MessageAB","是","AB","模块","间","通信","的","消息","*","MessageAC","是","AC","模块","间","通信","的","消息","*","MessageBC","是","BC","模块","间","通信","的","消息","*","&","#","x","2","F",";","enum","Message","&","#","123",";","MessageAB",",","MessageAC",",","MessageBC",",","&","#","125",";",";","class","MouleBase",";","&","#","x","2","F",";","&","#","x","2","F",";","中介","者基类","，","提供","转发","接口","class","MeatorBase","&","#","123",";","publc",":","rtual","o","Transmt","(","Message","enMessage",",","MouleBase","*","pFrom",")","&","#","x","3","D",";","0",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","模块","基类","，","实现","向外","发","消息","的","方法","class","MouleBase","&","#","123",";","publc",":","MouleBase","(","MeatorBase","*","pMeator",")",":","m","_","pMeator","(","pMeator",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","模块","向外","发","消息","的","方法","o","SenMessage","(","Message","enMessage",")","&","#","123",";","m","_","pMeator","-","Transmt","(","enMessage",",","ths",")",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","模块","接收","消息","的","接口","，","由","模块","自己","实现","rtual","o","Notfy","(","Message","enMessage",")","&","#","x","3","D",";","0",";","protecte",":","&","#","x","2","F",";","&","#","x","2","F",";","每个","模块","内","都","有","一份","负责","分发","消息","的","中介","者","MeatorBase","*","m","_","pMeator",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","模块","A","class","MouleA",":","publc","MouleBase","&","#","123",";","publc",":","MouleA","(","MeatorBase","*","pMeator",")",":","MouleBase","(","pMeator",")","&","#","123",";","&","#","125",";","rtual","o","Notfy","(","Message","enMessage",")","&","#","123",";","swtch","(","enMessage",")","&","#","123",";","case","MessageAB",":","cout","&","quot",";","MouleA","get","MessageAB","from","MouleB","&","quot",";","enl",";","break",";","case","MessageAC",":","cout","&","quot",";","MouleA","get","MessageAC","from","MouleC","&","quot",";","enl",";","break",";","efault",":","break",";","&","#","125",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","模块","B","class","MouleB",":","publc","MouleBase","&","#","123",";","publc",":","MouleB","(","MeatorBase","*","pMeator",")",":","MouleBase","(","pMeator",")","&","#","123",";","&","#","125",";","rtual","o","Notfy","(","Message","enMessage",")","&","#","123",";","swtch","(","enMessage",")","&","#","123",";","case","MessageAB",":","cout","&","quot",";","MouleB","get","MessageAB","from","MouleA","&","quot",";","enl",";","break",";","case","MessageBC",":","cout","&","quot",";","MouleB","get","MessageBC","form","MouleC","&","quot",";","enl",";","break",";","efault",":","break",";","&","#","125",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","模块","C","class","MouleC",":","publc","MouleBase","&","#","123",";","publc",":","MouleC","(","MeatorBase","*","pMeator",")",":","MouleBase","(","pMeator",")","&","#","123",";","&","#","125",";","rtual","o","Notfy","(","Message","enMessage",")","&","#","123",";","swtch","(","enMessage",")","&","#","123",";","case","MessageAC",":","cout","&","quot",";","MouleC","get","MessageAC","from","MouleA","&","quot",";","enl",";","break",";","case","MessageBC",":","cout","&","quot",";","MouleC","get","MessageBC","form","MouleB","&","quot",";","enl",";","break",";","efault",":","break",";","&","#","125",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","中介","者","实现","类","class","ConcreteMeator",":","publc","MeatorBase","&","#","123",";","publc",":","ConcreteMeator","(",")",":","m","_","pMoA","(","NULL",")",",","m","_","pMoB","(","NULL",")",",","m","_","pMoC","(","NULL",")","&","#","123",";","&","#","125",";","o","Transmt","(","Message","enMessage",",","MouleBase","*","pFrom",")","&","#","123",";","swtch","(","enMessage",")","&","#","123",";","case","MessageAB",":","&","#","123",";","MouleA","*","pFromWhere","&","#","x","3","D",";","ynamc","_","castMouleA","*","(","pFrom",")",";","&","#","x","2","F",";","&","#","x","2","F",";","能","通过","ynamc","_","cast","转换","为","不","为","NULL","的","指针",",","可","确认","指针","指向","的","子类","类型","f","(","NULL","!","&","#","x","3","D",";","pFromWhere",")","&","#","123",";","m","_","pMoB","-","Notfy","(","enMessage",")",";","&","#","125",";","else","&","#","123",";","m","_","pMoA","-","Notfy","(","enMessage",")",";","&","#","125",";","&","#","125",";","break",";","case","MessageAC",":","&","#","123",";","MouleA","*","pFromWhere","&","#","x","3","D",";","ynamc","_","castMouleA","*","(","pFrom",")",";","f","(","NULL","!","&","#","x","3","D",";","pFromWhere",")","&","#","123",";","m","_","pMoC","-","Notfy","(","enMessage",")",";","&","#","125",";","else","&","#","123",";","m","_","pMoA","-","Notfy","(","enMessage",")",";","&","#","125",";","&","#","125",";","case","MessageBC",":","&","#","123",";","MouleB","*","pFromWhere","&","#","x","3","D",";","ynamc","_","castMouleB","*","(","pFrom",")",";","f","(","NULL","!","&","#","x","3","D",";","pFromWhere",")","&","#","123",";","m","_","pMoC","-","Notfy","(","enMessage",")",";","&","#","125",";","else","&","#","123",";","m","_","pMoB","-","Notfy","(","enMessage",")",";","&","#","125",";","&","#","125",";","&","#","125",";","&","#","125",";","o","SetMouleA","(","MouleBase","*","pMouleA",")","&","#","123",";","m","_","pMoA","&","#","x","3","D",";","pMouleA",";","&","#","125",";","o","SetMouleB","(","MouleBase","*","pMouleB",")","&","#","123",";","m","_","pMoB","&","#","x","3","D",";","pMouleB",";","&","#","125",";","o","SetMouleC","(","MouleBase","*","pMouleC",")","&","#","123",";","m","_","pMoC","&","#","x","3","D",";","pMouleC",";","&","#","125",";","prate",":","MouleBase","*","m","_","pMoA",";","MouleBase","*","m","_","pMoB",";","MouleBase","*","m","_","pMoC",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","MeatorBase","*","pMeator","&","#","x","3","D",";","new","ConcreteMeator","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","为","所有","模块","指定","中介","者","MouleBase","*","pMoA","&","#","x","3","D",";","new","MouleA","(","pMeator",")",";","MouleBase","*","pMoB","&","#","x","3","D",";","new","MouleB","(","pMeator",")",";","MouleBase","*","pMoC","&","#","x","3","D",";","new","MouleC","(","pMeator",")",";","&","#","x","2","F",";","&","#","x","2","F",";","为","中介","者","设定","模块","ConcreteMeator","*","pConcreteMeator","&","#","x","3","D",";","ynamc","_","castConcreteMeator","*","(","pMeator",")",";","pConcreteMeator","-","SetMouleA","(","pMoA",")",";","pConcreteMeator","-","SetMouleB","(","pMoB",")",";","pConcreteMeator","-","SetMouleC","(","pMoC",")",";","&","#","x","2","F",";","&","#","x","2","F",";","各","模块","间","开始","互","发","消息","pMoA","-","SenMessage","(","MessageAC",")",";","pMoB","-","SenMessage","(","MessageBC",")",";","pMoC","-","SenMessage","(","MessageBC",")",";","return","0",";","&","#","125",";","控制台","输出","结果","MouleC","get","MessageAC","from","MouleA","MouleC","get","MessageBC","form","MouleB","MouleB","get","MessageBC","form","MouleC","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/","title":"中介者模式","content":"简介\n中介者模式：一种行为型设计模式\n应用场景：一般来说，大型的软件在开发的过程中会使用模块化的开发方式。以我现在参与的项目举例，完整的软件包括交互、检索、算路、引导等等多个模块，这样有利于模块之间的独立开发，提高整体开发效率。但是无...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:58:32"},{"word":["简介","职责","链","模式","：","一种","行为","型","设计","模式","应用","场景","：","系统","中","会","出现","一些","请求","，","而","可以","处理","请求","的","处理","者","会","有","很多","，","如何","将","由","适当的","处理","者","处理","请求","，","是","职责","链","模式","解决","的","问题","。","职责","链","模式","将","所有","处理","者","连成","一条","链","，","请求","在","链","上传","播","，","直至","被","处理","完成","。","举例","：","在","公司","的","请假","系统","中","，","一般","会","分为","n","级","审核","人","。","一级","审核","人","是","组长","，","可以","批准","24","小时","以下","请假","申请","；","二级","审核","人","是","部门","主管","，","可以","批准","48","小时","以下","请假","申请","；","而","48","小时","以上","的","申请","则","需要","由","三级","审核","人","，","部门经理","批准","。","使用","职责","链","模式","将","一二","三级","审核","人","连成","一条","链","，","申请","由","一级","审核","人","开始","审核","，","如果","一级","审核","人","不能","批准","则","传给","二级","审核","人","、","三级","审核","人","。","实现","方式","：","创建","一个","审核","者","抽象","类","，","类","中","只","封装","一个","共同","的","处理","请求","纯","虚","函数","。","一级","审核","人类","中","添加","二级","审核","人","作为","成员","变量","，","并","在","构造","时","初始化","。","处理","请求","函数","中","判断","申请","属性","，","如果","不能","处理","，","交给","二级","审核","人","审核","。","二级","审核","人类","中","同上","。","职责","链","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","假期","请求","类","class","HolayRequest","&","#","123",";","publc",":","HolayRequest","(","nt","Hour",")",":","m","_","Hour","(","Hour",")","&","#","123",";","&","#","125",";","nt","GetHour","(",")","&","#","123",";","return","m","_","Hour",";","&","#","125",";","prate",":","nt","m","_","Hour",";","&","#","x","2","F",";","&","#","x","2","F",";","请求","的","假期","时间","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","审批","者","抽象","类","class","Approer","&","#","123",";","publc",":","rtual","bool","DealRequest","(","HolayRequest","*",")","&","#","x","3","D",";","0",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","一级","审批","者","，","可","审批","24","小时","以下","假期","申请","class","FrstLeelApproer",":","publc","Approer","&","#","123",";","publc",":","FrstLeelApproer","(","Approer","*","pApproer",")",":","m","_","pApproer","(","pApproer",")","&","#","123",";","&","#","125",";","rtual","bool","DealRequest","(","HolayRequest","*","pReq",")","&","#","123",";","f","(","pReq","-","GetHour","(",")","24",")","&","#","123",";","cout","&","quot",";","Frst","Leel","Approe","&","quot",";","enl",";","return","true",";","&","#","125",";","return","m","_","pApproer","-","DealRequest","(","pReq",")",";","&","#","125",";","prate",":","Approer","*","m","_","pApproer",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","二级","审批","者","，","可","审批","48","小时","以下","假期","申请","class","SeconLeelApproer",":","publc","Approer","&","#","123",";","publc",":","SeconLeelApproer","(","Approer","*","pApproer",")",":","m","_","pApproer","(","pApproer",")","&","#","123",";","&","#","125",";","rtual","bool","DealRequest","(","HolayRequest","*","pReq",")","&","#","123",";","f","(","pReq","-","GetHour","(",")","48",")","&","#","123",";","cout","&","quot",";","Secon","Leel","Approe","&","quot",";","enl",";","return","true",";","&","#","125",";","return","m","_","pApproer","-","DealRequest","(","pReq",")",";","&","#","125",";","prate",":","Approer","*","m","_","pApproer",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","一级","审批","者","，","审批","48","小时","以上","假期","申请","class","ThrLeelApproer",":","publc","Approer","&","#","123",";","publc",":","rtual","bool","DealRequest","(","HolayRequest","*","pReq",")","&","#","123",";","cout","&","quot",";","Thr","Leel","Approe","&","quot",";","enl",";","return","true",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","ThrLeelApproer","*","pThr","&","#","x","3","D",";","new","ThrLeelApproer","(",")",";","SeconLeelApproer","*","pSecon","&","#","x","3","D",";","new","SeconLeelApproer","(","pThr",")",";","FrstLeelApproer","*","pFrst","&","#","x","3","D",";","new","FrstLeelApproer","(","pSecon",")",";","cout","&","quot",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","18","-","Hours","Request","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","quot",";","enl",";","HolayRequest","*","pReq","1","&","#","x","3","D",";","new","HolayRequest","(","18",")",";","pFrst","-","DealRequest","(","pReq","1",")",";","cout","&","quot",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","36","-","Hours","Request","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","quot",";","enl",";","HolayRequest","*","pReq","2","&","#","x","3","D",";","new","HolayRequest","(","36",")",";","pFrst","-","DealRequest","(","pReq","2",")",";","cout","&","quot",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","72","-","Hours","Request","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","quot",";","enl",";","HolayRequest","*","pReq","3","&","#","x","3","D",";","new","HolayRequest","(","72",")",";","pFrst","-","DealRequest","(","pReq","3",")",";","return","0",";","&","#","125",";","控制台","输出","结果","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","18","-","Hours","Request","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","Frst","Leel","Approe","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","36","-","Hours","Request","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","Secon","Leel","Approe","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","72","-","Hours","Request","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","Thr","Leel","Approe","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F/","title":"职责链模式","content":"简介\n职责链模式：一种行为型设计模式\n应用场景：系统中会出现一些请求，而可以处理请求的处理者会有很多，如何将由适当的处理者处理请求，是职责链模式解决的问题。职责链模式将所有处理者连成一条链，请求在链上传播，直至被处理完成。\n\n举例：在...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:57:32"},{"word":["简介","模板","方法","模式","：","一种","行为","型","设计","模式","应用","场景","：","模板","方法","是","一种","代码","复用","的","基本","技术",",","定义","了","一个","操作","中的","算法","骨架","，","而","将","一些","步骤","延迟","到","子类","中","。","在","使用","模板","方法","时","，","很重要","的","一点","是","模板","方法","应当","指明","哪些","操作","是","可以","被","重","写","的","，","以及","哪些","是","必须","被","重","写","的","。","此","设计","模式","比较","简单","，","直接","看","代码","吧","。","模板","方法","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","默认","的","模板","方法","类","class","DefaultTemplate","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","固定","的","模板","方法","流程","o","TemplateMetho","(",")","&","#","123",";","Step","1","(",")",";","Step","2","(",")",";","Step","3","(",")",";","&","#","125",";","prate",":","rtual","o","Step","1","(",")","&","#","123",";","cout","&","quot",";","Default","Step","1","&","quot",";","enl",";","&","#","125",";","rtual","o","Step","2","(",")","&","#","123",";","cout","&","quot",";","Default","Step","2","&","quot",";","enl",";","&","#","125",";","rtual","o","Step","3","(",")","&","#","123",";","cout","&","quot",";","Default","Step","3","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","重","写","步骤","1","、","3","class","NewTemplate",":","publc","DefaultTemplate","&","#","123",";","prate",":","rtual","o","Step","1","(",")","&","#","123",";","cout","&","quot",";","New","Step","1","&","quot",";","enl",";","&","#","125",";","rtual","o","Step","3","(",")","&","#","123",";","cout","&","quot",";","New","Step","3","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","DefaultTemplate","oDefault",";","oDefault",".","TemplateMetho","(",")",";","NewTemplate","oNew",";","oNew",".","TemplateMetho","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","Default","Step","1","Default","Step","2","Default","Step","3","New","Step","1","Default","Step","2","New","Step","3","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/","title":"模板方法模式","content":"简介\n模板方法模式：一种行为型设计模式\n应用场景：模板方法是一种代码复用的基本技术,定义了一个操作中的算法骨架，而将一些步骤延迟到子类中。在使用模板方法时，很重要的一点是模板方法应当指明哪些操作是可以被重写的，以及哪些是必须被重写的。...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:56:32"},{"word":["简介","命令","模式","：","一种","行为","型","设计","模式","应用","场景","：","在","GOF","的","《","设计","模式",":","可","复用","面向","对象","软件","的","基础","》","一","书中","对","命令","模式","是","这样","说的","：","将","一个","请求","封装","为","一个","对象","，","从而","使","你","可以","用","不同的","请求","对","客户","进行","参数","化","，","将","请求","排队","或","记录","请求","日志","，","以及","支持","可","撤销","的","操作","。","这","段话","的","意思","我","在","刚刚","了解","这个","设计","模式","时","没有","很懂","，","可以","在","看完","全文","后","再","回来","看","一遍","。","这个","设计","模式","的","应用","很多","。","即","将要","开始","被","天天","谈论","的","12306","订票","网站","，","每个","用户","发起","订票","请求","后","，","该","请求","不会","被","立即","执行","，","而是","会","进入","消息","队列","。","同一","用户","再次","发起","请求","时","如果","前","一","请求","尚","在","队列","中","排队","，","新的","请求","会","被","忽略","，","避免","了","恶意","刷票","，","优化","了","服务器","的","性能","。","而","何时","将","队列","中的","消息","取出","，","统一","处理","，","将","由","系统","其他","设置","决定","。","这个","队列","就是","请求","的","收集者","。","举例","：","我","还","是以","公司","里","的","审批","制度","举例","。","在","部门","每","月末","收集","报销","单时","，","一般","会","指定","一个","收集者","，","这个","人","负责","收集","部门","内","所","有的","报销","单","，","收集","完成","后","统一","交给","审批","者","进行","审批","。","而且","，","不同","种类","的","报销","单","可能","由","不同的","人","审批","，","都","由","这个","收集者","分配","。","这个","收集者","就是","上述","的","队列","，","他","可以","对","报销","单","的","审批","顺序","进行","排列","，","也","可以","对","数目","和","人员","进行","记录","，","以及","支持","撤销","报销","的","操作","。","实现","方式","：","需要","创建","三个","类","，","请求","类","，","审批","人类","和","收集者","类","请求","类","中","要","通过","成员","变量","指定","审批","人","，","审批","人要","提供","审批","接口","，","收集者","类","中","要有","容器","用来","容纳","请求","，","并提","供","统一","处理","的","方法","。","命令","模式","的","简单","代码","实现","#","nclue","ostream","#","nclue","ector","#","nclue","strng","#","nclue","algorthm","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","请求","抽象","类","class","Request","&","#","123",";","publc",":","Request","(","nt","No",")",":","m","_","No","(","No",")","&","#","123",";","&","#","125",";","rtual","o","Execute","(",")","&","#","x","3","D",";","0",";","nt","GetID","(",")","&","#","123",";","return","m","_","No",";","&","#","125",";","protecte",":","nt","m","_","No",";","&","#","x","2","F",";","&","#","x","2","F",";","请求","ID","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","审核","人","class","Approer","&","#","123",";","publc",":","Approer","(","strng","strName",")",":","m","_","strName","(","strName",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","审核","请求","，","打印","信息","rtual","o","DealRequest","(","Request","*","pRequest",")","&","#","123",";","cout","&","quot",";","Request","&","quot",";","pRequest","-","GetID","(",")","&","quot",";","Approe","by","&","quot",";","m","_","strName","enl",";","&","#","125",";","prate",":","strng","m","_","strName",";","&","#","x","2","F",";","&","#","x","2","F",";","审核","人","的","名字","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","假期","请求","class","HolayRequest",":","publc","Request","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","构造","时","指定","请求","ID","和","审核","人","HolayRequest","(","nt","NO",",","Approer","*","pApproer",")",":","Request","(","NO",")",",","m","_","pApproer","(","pApproer",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","请求","被","处理","rtual","o","Execute","(",")","&","#","123",";","m","_","pApproer","-","DealRequest","(","ths",")",";","&","#","125",";","prate",":","Approer","*","m","_","pApproer",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","汇总","请求者","class","Inoker","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","收集","请求","o","AReq","(","Request","*","pReq",")","&","#","123",";","m","_","ecReq",".","push","_","back","(","pReq",")",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","统一","申请","o","InokeAllReq","(",")","&","#","123",";","for","_","each","(","m","_","ecReq",".","begn","(",")",",","m","_","ecReq",".","en","(",")",",","Inoke",")",";","&","#","125",";","prate",":","statc","o","Inoke","(","Request","*","pReq",")","&","#","123",";","f","(","pReq",")","&","#","123",";","pReq","-","Execute","(",")",";","&","#","125",";","&","#","125",";","ectorRequest","*","m","_","ecReq",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","假设","有","两个","经理","负责","审批","，","分","别","叫","Mark","和","Nancy","Approer","*","pManagerMark","&","#","x","3","D",";","new","Approer","(","&","quot",";","Mark","&","quot",";",")",";","Approer","*","pManagerNancy","&","#","x","3","D",";","new","Approer","(","&","quot",";","Nancy","&","quot",";",")",";","&","#","x","2","F",";","&","#","x","2","F",";","一个","请求","收集者","Inoker","*","pInoker","&","#","x","3","D",";","new","Inoker","(",")",";","pInoker","-","AReq","(","new","HolayRequest","(","1",",","pManagerMark",")",")",";","pInoker","-","AReq","(","new","HolayRequest","(","2",",","pManagerMark",")",")",";","pInoker","-","AReq","(","new","HolayRequest","(","3",",","pManagerNancy",")",")",";","pInoker","-","AReq","(","new","HolayRequest","(","4",",","pManagerNancy",")",")",";","&","#","x","2","F",";","&","#","x","2","F",";","收集","所有","请求","后","统一","送","去","审批","pInoker","-","InokeAllReq","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","Request","1","Approe","by","Mark","Request","2","Approe","by","Mark","Request","3","Approe","by","Nancy","Request","4","Approe","by","Nancy","嗯","~","现在","可以","回去","再看","一遍","文章","开头","从","GOF","书中","摘抄","的","描述","了","~","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/","title":"命令模式","content":"简介\n命令模式：一种行为型设计模式\n应用场景：在GOF的《设计模式:可复用面向对象软件的基础》一书中对命令模式是这样说的：将一个请求封装为一个对象，从而使你可以用不同的请求对客户进行参数化，将请求排队或记录请求日志，以及支持可撤销的操...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:55:32"},{"word":["简介","解释","器","模式","：","一种","行为","型","设计","模式","首先","，","我想","先","说明","一下","，","解释","器","模式","是","我","个人","认为","最","复杂的","设计","模式","，","可能","因为","我","目前","对","编程","语言","的","解析","原理","不甚","了解","，","对","这个","模式","的","理解","也","很","片面","。","应用","场景","：","解释","器","模式","的","应用","场景","是","对","语句","进行","解析","。","给定","语法","规则","，","先","将","语句","形成","语义","树","，","然后","通过","解释","器","对","语义","树","进行","解释","，","输出","结果","。","常用","场景","如","解析","xml","配置","文件","。","举例","：","以","解析","*","*","a","+","b","+","c","来","举例","，","将","a","，","+","，","b","，","+","，","c","五个","符号","作为","独立的","对象","来","解析","。","这","五个","符号","根据","解析","方式","不同","可","分为","两","类","，","a","b","c","为","一类","，","这类","对象","的","解析","结果","就是","这个","对象","本身","的","值","。","而","+","的","解析","要","取","这个","元素","左右","相邻","的","两个","元素","，","进行","相加","，","将","和","作为","解析","结果","返回","。","解释","前","先","生成","语义","树","*","*","，","类似","这样","：","+","&","#","x","2","F",";","\\","+","c","&","#","x","2","F",";","\\","a","b","然后","从","根","节点","开始","，","依次","对","节点","进行","递归","解析","。","a","b","c","这类","解释","器使","程序","不会","无限","递归","下去","，","称作","终结","符","解释","器","（","终结","递归","）","。","另一","类","需要","递归","向下","解析","的","，","称作","非","终结","符","解释","器","。","实现","方式","：","解释","器基类","派生","出","终结","符","解释","器","和","非","终结","符","解释","器","，","非","终结","符","解释","器","根据","解释","功能","派","生出","具体的","解释","器类","（","*","*","+","调用","左右","两数","相加","，","-","调用","左右","两数","相减","）","。","再有","一个","解析","器","*","*","，","将","语句","生成","语义","树","。","解释","器","模式","的","简单","代码","实现","#","nclue","ostream","#","nclue","strng","#","nclue","map","#","nclue","stack","#","nclue","typenfo","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","解释","器","抽象","类","class","Expresson","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","解析","公式","和","数值","，","其","中","mapValue","中的","key","是","公式","中的","参数","，","alue","值","是","具体的","值","rtual","nt","nterpreter","(","mapstrng",",","nt","&","amp",";","MapValue",")","&","#","x","3","D",";","0",";","rtual","~","Expresson","(",")","&","#","123",";","&","#","125",";",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","变量","解析","器","（","终结","符","）","class","VarExpresson",":","publc","Expresson","&","#","123",";","strng","m","_","strkey",";","publc",":","VarExpresson","(","strng","strkey",")",":","m","_","strkey","(","strkey",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","从","map","中","取出","变量","的","值","nt","nterpreter","(","mapstrng",",","nt","&","amp",";","MapValue",")","&","#","123",";","return","MapValue","[","m","_","strkey","]",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","运算","符","解析","器","（","非","终结","符","）","class","SymbolExpresson",":","publc","Expresson","&","#","123",";","protecte",":","Expresson","*","m","_","pLeft",";","Expresson","*","m","_","pRght",";","publc",":","SymbolExpresson","(","Expresson","*","pLeft",",","Expresson","*","pRght",")",":","m","_","pLeft","(","pLeft",")",",","m","_","pRght","(","pRght",")","&","#","123",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","加法","解析","器","class","AExpresson",":","publc","SymbolExpresson","&","#","123",";","publc",":","AExpresson","(","Expresson","*","pLeft",",","Expresson","*","pRght",")",":","SymbolExpresson","(","pLeft",",","pRght",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","把","左右","两个","变量","相加","nt","nterpreter","(","mapstrng",",","nt","&","amp",";","MapValue",")","&","#","123",";","return","m","_","pLeft","-","nterpreter","(","MapValue",")","+","m","_","pRght","-","nterpreter","(","MapValue",")",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","减法","解析","器","class","SubExpresson",":","publc","SymbolExpresson","&","#","123",";","publc",":","SubExpresson","(","Expresson","*","pLeft",",","Expresson","*","pRght",")",":","SymbolExpresson","(","pLeft",",","pRght",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","把","左右","两个","变量","相减","nt","nterpreter","(","mapstrng",",","nt","&","amp",";","MapValue",")","&","#","123",";","return","m","_","pLeft","-","nterpreter","(","MapValue",")","-","m","_","pRght","-","nterpreter","(","MapValue",")",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","语义","解析","器","class","Parse","&","#","123",";","prate",":","Expresson","*","m","_","pExpresson",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","构造","函数","传参","，","并","解析","表达式","，","构建","语法","树","Parse","(","strng","strExpStr",")","&","#","123",";","m","_","pExpresson","&","#","x","3","D",";","NULL",";","stackExpresson","*","stackExp",";","Expresson","*","pLeft","&","#","x","3","D",";","NULL",";","Expresson","*","pRght","&","#","x","3","D",";","NULL",";","for","(","unsgne","nt","&","#","x","3","D",";","0",";","strExpStr",".","length","(",")",";","+","+",")","&","#","123",";","swtch","(","strExpStr","[","]",")","&","#","123",";","case","&","#","39",";","+","&","#","39",";",":","&","#","x","2","F",";","&","#","x","2","F",";","加法","&","#","x","2","F",";","&","#","x","2","F",";","1",".","先","从","栈","中","取出","左","操","作数","pLeft","&","#","x","3","D",";","stackExp",".","top","(",")",";","stackExp",".","pop","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","2",".","从","表达式","中","取出","+","号","后面","的","右","操","作数","，","并","生成","终结","符","解析","对象","pRght","&","#","x","3","D",";","new","VarExpresson","(","strExpStr",".","substr","(","+","+",",","1",")",")",";","&","#","x","2","F",";","&","#","x","2","F",";","3",".","将","左右","操","作数","相加","，","并把","结果","放入","栈","中","stackExp",".","push","(","new","AExpresson","(","pLeft",",","pRght",")",")",";","break",";","case","&","#","39",";","-","&","#","39",";",":","&","#","x","2","F",";","&","#","x","2","F",";","1",".","先","从","栈","中","取出","左","操","作数","pLeft","&","#","x","3","D",";","stackExp",".","top","(",")",";","stackExp",".","pop","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","2",".","从","表达式","中","取出","+","号","后面","的","右","操","作数","，","并","生成","终结","符","解析","对象","pRght","&","#","x","3","D",";","new","VarExpresson","(","strExpStr",".","substr","(","+","+",",","1",")",")",";","&","#","x","2","F",";","&","#","x","2","F",";","3",".","将","左右","操","作数","相减","，","并把","结果","放入","栈","中","stackExp",".","push","(","new","SubExpresson","(","pLeft",",","pRght",")",")",";","break",";","efault",":","&","#","x","2","F",";","&","#","x","2","F",";","如果","是","变量","（","终结","符","）","，","&","#","x","2","F",";","&","#","x","2","F",";","则","直接","生成","对应","的","变量","解析","器","stackExp",".","push","(","new","VarExpresson","(","strExpStr",".","substr","(",",","1",")",")",")",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","栈","中","保存","的","就是","最终","语法","树","的","根","结点","（","本","例","为","SuuExpresson","对象","）","f","(","!","stackExp",".","empty","(",")",")","&","#","123",";","m","_","pExpresson","&","#","x","3","D",";","stackExp",".","top","(",")",";","stackExp",".","pop","(",")",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","开始","运算","nt","Calculate","(","mapstrng",",","nt","&","amp",";","MapValue",")","&","#","123",";","return","(","!","m","_","pExpresson",")","?","0",":","m","_","pExpresson","-","nterpreter","(","MapValue",")",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","strng","strExpresson","&","#","x","3","D",";","&","quot",";","a","-","b","+","c","&","quot",";",";","mapstrng",",","nt","MapValue",";","MapValue","[","&","quot",";","a","&","quot",";","]","&","#","x","3","D",";","50",";","MapValue","[","&","quot",";","b","&","quot",";","]","&","#","x","3","D",";","40",";","MapValue","[","&","quot",";","c","&","quot",";","]","&","#","x","3","D",";","30",";","Parse","ParseTree","(","strExpresson",")",";","&","#","x","2","F",";","&","#","x","2","F",";","生成","语义","树","cout","strExpresson","&","quot",";","&","#","x","3","D",";","&","quot",";","ParseTree",".","Calculate","(","MapValue",")","enl",";","return","0",";","&","#","125",";","控制台","输出","结果","a","-","b","+","c","&","#","x","3","D",";","40","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F/","title":"解释器模式","content":"简介\n解释器模式：一种行为型设计模式\n\n 首先，我想先说明一下，解释器模式是我个人认为最复杂的设计模式，可能因为我目前对编程语言的解析原理不甚了解，对这个模式的理解也很片面。\n\n应用场景：解释器模式的应用场景是对语句进行解析。给定语法...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:54:32"},{"word":["简介","观察者","模式","：","一种","行为","型","设计","模式","应用","场景","：","观察者","模式","定义","了","对象","间","一对","多","的","依赖","关系","，","当","一个","对象","的","状态","发生","改变","时","，","所有","依赖于","它","的","对象","都","得到","通知","并","被","自动更新","。","这种","交互","也","称为","发布","-","订阅","(","publsh","-","subscrbe",")","。","观察者","模式","在","设计","模式","中的","地位","非常","高","，","在","各","大","框架","中的","应用","随处可见","。","Qt","框架","中的","信号","槽","机制","就是","观察者","模式","的","典型","应用","：","通过","用户","的","点击","，","触发","与","按键","点击","所","绑定","的","槽","函数","。","举例","：","假设","公司","中的","Boss","要","发","邮件","通知","所有","下属","员工","，","那么","首先","需要","在","Boss","端","保存","一个","所有","下属","的","邮箱","列表","，","这样","Boss","要","统一","通知","所有","下","属员","工时","，","直接","向","列表","中的","邮箱","逐个","发送","即可","。","实现","方式","：","Boss","类","就是","被","观察者","类","，","类","中","要有","一个","用以","保存","所有","下属","邮箱","的","容器","，","还","要有","一个","通知","容器","中","所有","对象","的","方法","。","每","名","下属","员工","为","一个","观察者","对象","，","有","一个","被","通知","的","方法","。","观察者","模式","的","简单","代码","实现","#","nclue","ostream","#","nclue","set","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","观察者","抽象","类","class","Obserer","&","#","123",";","publc",":","rtual","o","ReceeMal","(","strng","strMessage",")","&","#","x","3","D",";","0",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","被","观察者","抽象","类","class","Subject","&","#","123",";","publc",":","rtual","o","AObserer","(","Obserer","*","pObserer",")","&","#","x","3","D",";","0",";","rtual","o","DeleteObserer","(","Obserer","*","pObserer",")","&","#","x","3","D",";","0",";","rtual","o","SenMal","(","strng","strMessage",")","&","#","x","3","D",";","0",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","被","观察者","实现","类","class","Boss",":","publc","Subject","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","添加","观察者","o","AObserer","(","Obserer","*","pObserer",")","&","#","123",";","setObs",".","nsert","(","pObserer",")",";","&","#","125",";","o","DeleteObserer","(","Obserer","*","pObserer",")","&","#","123",";","setObs",".","erase","(","pObserer",")",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","通知","所有","观察者","o","SenMal","(","strng","strMessage",")","&","#","123",";","for","(","auto","ter","&","#","x","3","D",";","setObs",".","begn","(",")",";","ter","!","&","#","x","3","D",";","setObs",".","en","(",")",";","+","+","ter",")","&","#","123",";","(","*","ter",")","-","ReceeMal","(","strMessage",")",";","&","#","125",";","&","#","125",";","prate",":","&","#","x","2","F",";","&","#","x","2","F",";","存放","观察者","的","容器","setObserer","*","setObs",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","观察者","实现","类","class","Staff",":","publc","Obserer","&","#","123",";","publc",":","Staff","(","strng","strName",")",":","m","_","strName","(","strName",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","收到","通知","，","取","邮件","并","显示","o","ReceeMal","(","strng","strMessage",")","&","#","123",";","cout","&","quot",";","Staff","&","quot",";","m","_","strName","&","quot",";","Recee","Mal",":","&","quot",";","strMessage","enl",";","&","#","125",";","prate",":","strng","m","_","strName",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","Subject","*","pBoss","&","#","x","3","D",";","new","Boss","(",")",";","Obserer","*","pStaffA","&","#","x","3","D",";","new","Staff","(","&","quot",";","Mark","&","quot",";",")",";","pBoss","-","AObserer","(","pStaffA",")",";","Obserer","*","pStaffB","&","#","x","3","D",";","new","Staff","(","&","quot",";","Jeremy","&","quot",";",")",";","pBoss","-","AObserer","(","pStaffB",")",";","pBoss","-","SenMal","(","&","quot",";","test","&","quot",";",")",";","return","0",";","&","#","125",";","控制台","输出","结果","Staff","Mark","Recee","Mal",":","test","Staff","Jeremy","Recee","Mal",":","test","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/","title":"观察者模式","content":"简介\n观察者模式：一种行为型设计模式\n应用场景：观察者模式定义了对象间一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。这种交互也称为发布-订阅(publish-subscribe)。观察者模式在...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:52:32"},{"word":["简介","访问者","模式","：","一种","行为","型","设计","模式","应用","场景","：","一个","对象","由","很多","部分","组成","，","对","这个","对象","的","操作","会","对","各部分","依次","操作","。","而","在","不同","情景","下","，","对","各部分","操作","也不","同","。","为了","新增","操作","时","无需","了解","对象","内部结构","，","且","具备","可","扩展性","，","将","操作","抽离","为","访问者","类","，","类","中","实现","对","各部分","具体的","操作方法","。","然后","在","对象","中","提供","一个","接口","用以","访问者","访问","，","在","该","接口","总","，","对象","会","调用","访问者","中","对应","各部分","的","操作方法","，","操","作对","象","中的","各部分","。","举例","：","一台","电脑","中","有","很多","组件","，","CPU","、","GPU","、","硬盘","。","维修","人员","对","电脑","进行","整体","维修","时","，","需要","对","各部","件","依次","进行","维修","，","而且","每","部件","具体的","维修","方式","不同","。","不同的","维修","人员","对","相同","的","部件","维修","方式","可能","也不","同","。","维修","人员","就是","访问者","。","访问者","类","中","实现","了","针对","不同","部件","的","维修","方式","。","电脑","就是","被","访问者","。","被","访问者","提供","访问","接口","，","使用","访问者","类","中","实现","的","不同","部件","维修","方式","，","对内","部","部件","进行","访问","。","访问者","模式","的","简单","代码","实现","#","nclue","ostream","#","nclue","lst","usng","namespace","st",";","class","Vstor",";","&","#","x","2","F",";","&","#","x","2","F",";","组成","Computer","的","各组","件","基类","class","Element","&","#","123",";","publc",":","Element","(","strng","strName",")",":","m","_","strName","(","strName",")","&","#","123",";","&","#","125",";","strng","GetName","(",")","&","#","123",";","return","m","_","strName",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","组件","接受","访问者","访问","的","接口","rtual","o","AcceptVstor","(","Vstor","*","pVstor",")","&","#","x","3","D",";","0",";","prate",":","&","#","x","2","F",";","&","#","x","2","F",";","组件","的","标识","名称","strng","m","_","strName",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","访问","者基类","，","针对","不同","组件","，","提供","不同的","访问","接口","class","Vstor","&","#","123",";","publc",":","rtual","o","VstCPU","(","Element","*","pEle",")","&","#","x","3","D",";","0",";","rtual","o","VstGPU","(","Element","*","pEle",")","&","#","x","3","D",";","0",";","rtual","o","VstDISK","(","Element","*","pEle",")","&","#","x","3","D",";","0",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","Computer","类","，","由","各组","件","组成","，","访问者","访问","Computer","时","将","依次","访问","各组","件","class","Computer","&","#","123",";","publc",":","~","Computer","(",")","&","#","123",";","for","(","Element","*","pElement",":","m","_","lstEle",")","&","#","123",";","elete","pElement",";","&","#","125",";","&","#","125",";","o","AElement","(","Element","*","pEle",")","&","#","123",";","m","_","lstEle",".","push","_","back","(","pEle",")",";","&","#","125",";","o","DelElement","(","Element","*","pEle",")","&","#","123",";","m","_","lstEle",".","remoe","(","pEle",")",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","访问者","访问","Computer","时","将","依次","访问","各组","件","o","AcceptVstor","(","Vstor","*","pVstor",")","&","#","123",";","for","(","Element","*","pElement",":","m","_","lstEle",")","&","#","123",";","pElement","-","AcceptVstor","(","pVstor",")",";","&","#","125",";","&","#","125",";","prate",":","lstElement","*","m","_","lstEle",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","访问者","实现","类","，","实现","各自","的","访问","方法","class","VstorA",":","publc","Vstor","&","#","123",";","publc",":","o","VstCPU","(","Element","*","pEle",")","&","#","123",";","prntf","(","&","quot",";","Vstor","A","recor","CPU","&","#","39",";","s","name",":","%","s","\\","n","&","quot",";",",","pEle","-","GetName","(",")",".","c","_","str","(",")",")",";","&","#","125",";","o","VstGPU","(","Element","*","pEle",")","&","#","123",";","prntf","(","&","quot",";","Vstor","A","o","nothng","to","GPU",":","%","s","\\","n","&","quot",";",",","pEle","-","GetName","(",")",".","c","_","str","(",")",")",";","&","#","125",";","o","VstDISK","(","Element","*","pEle",")","&","#","123",";","prntf","(","&","quot",";","Vstor","A","change","DISK",":","%","s","\\","n","&","quot",";",",","pEle","-","GetName","(",")",".","c","_","str","(",")",")",";","&","#","125",";","&","#","125",";",";","class","VstorB",":","publc","Vstor","&","#","123",";","publc",":","o","VstCPU","(","Element","*","pEle",")","&","#","123",";","prntf","(","&","quot",";","Vstor","B","o","nothng","to","CPU",":","%","s","\\","n","&","quot",";",",","pEle","-","GetName","(",")",".","c","_","str","(",")",")",";","&","#","125",";","o","VstGPU","(","Element","*","pEle",")","&","#","123",";","prntf","(","&","quot",";","Vstor","B","recor","GPU","&","#","39",";","s","name",":","%","s","\\","n","&","quot",";",",","pEle","-","GetName","(",")",".","c","_","str","(",")",")",";","&","#","125",";","o","VstDISK","(","Element","*","pEle",")","&","#","123",";","prntf","(","&","quot",";","Vstor","B","o","nothng","to","DISK",":","%","s","\\","n","&","quot",";",",","pEle","-","GetName","(",")",".","c","_","str","(",")",")",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","组件","的","实现","类","，","调用","访问者","相应","的","访问","方法","class","CPU",":","publc","Element","&","#","123",";","publc",":","CPU","(","strng","strName",")",":","Element","(","strName",")","&","#","123",";","&","#","125",";","o","AcceptVstor","(","Vstor","*","pVstor",")","&","#","123",";","pVstor","-","VstCPU","(","ths",")",";","&","#","125",";","&","#","125",";",";","class","GPU",":","publc","Element","&","#","123",";","publc",":","GPU","(","strng","strName",")",":","Element","(","strName",")","&","#","123",";","&","#","125",";","o","AcceptVstor","(","Vstor","*","pVstor",")","&","#","123",";","pVstor","-","VstGPU","(","ths",")",";","&","#","125",";","&","#","125",";",";","class","Dsk",":","publc","Element","&","#","123",";","publc",":","Dsk","(","strng","strName",")",":","Element","(","strName",")","&","#","123",";","&","#","125",";","o","AcceptVstor","(","Vstor","*","pVstor",")","&","#","123",";","pVstor","-","VstDISK","(","ths",")",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","Computer","oComputer",";","oComputer",".","AElement","(","new","CPU","(","&","quot",";","9","-","10980","XE","&","quot",";",")",")",";","oComputer",".","AElement","(","new","GPU","(","&","quot",";","Ttan","RTX","&","quot",";",")",")",";","oComputer",".","AElement","(","new","Dsk","(","&","quot",";","HOF","PRO","M",".","2","&","quot",";",")",")",";","VstorA","oVstorA",";","VstorB","oVstorB",";","oComputer",".","AcceptVstor","(","&","amp",";","oVstorA",")",";","oComputer",".","AcceptVstor","(","&","amp",";","oVstorB",")",";","return","0",";","&","#","125",";","控制台","输出","结果","Vstor","A","recor","CPU","&","#","39",";","s","name",":","9","-","10980","XE","Vstor","A","o","nothng","to","GPU",":","Ttan","RTX","Vstor","A","change","DISK",":","HOF","PRO","M",".","2","Vstor","B","o","nothng","to","CPU",":","9","-","10980","XE","Vstor","B","recor","GPU","&","#","39",";","s","name",":","Ttan","RTX","Vstor","B","o","nothng","to","DISK",":","HOF","PRO","M",".","2","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/","title":"访问者模式","content":"简介\n访问者模式：一种行为型设计模式\n应用场景：一个对象由很多部分组成，对这个对象的操作会对各部分依次操作。而在不同情景下，对各部分操作也不同。为了新增操作时无需了解对象内部结构，且具备可扩展性，将操作抽离为访问者类，类中实现对各部分...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:51:32"},{"word":["简介","迭","代","器","模式","：","一种","行为","型","设计","模式","应用","场景","：","刚","学习","C++","STL","容器","的","时候","，","自然","也","学习","了","迭","代","器","。","当时","很不","懂","为什么","指针","可以","解决","的","问题","，","要","封","成","一个","表现","和","指针","很","类似的","类","，","还","起","了","个","新名词","叫","迭","代","器","。","后来","对","多种","数据结构","的","应用","渐渐","有了","了解","之后","，","大致","知道了","迭","代","器","的","优点","。","再","后来","学习","到了","迭","代","器","模式","，","才","懂得","迭","代","器","是","一种","思想","，","可以","隐藏","容器","的","内部","实现","细节","，","向","使用者","提供","简单的","方式","进行","容器","内","元素","的","迭","代","访问","。","举例","：","数","组","和","链表","，","一个","是","连续","内存","，","一个","是非","连续","内存","。","在","这","两种","数据结构","中","，","对","某个","元素","下一个","元素","的","访问","方式","是","不同的","，","数组","可以","通过","将","前","一","元素","下标","+","1","访问","下","一","元素","，","而","链表","需要","通过","当前","节点","的","Next","指针","获取","下","一","元素","的","地址","，","再","进行","元素","访问","。","这样","对","用户","来说","体验","是","很不","友好的","。","用户","需要","记住","每种","容器","的","迭","代","访问","方式","，","大大","降低","了","使用","效率","。","所以","如果","每种","容器","都","能","提供给","用户","统一","的","访问","方式","，","就","可以","解决","这个","状况","了","，","于是","迭","代","器","模式","登场","了","。","实现","方式","：","每种","容器","在","实现","的","同时","，","提供","一个","相对","应","的","迭","代","器类","。","迭","代","器类","中","保存","一个","指针","，","指向","链表","中的","某个","节点","，","通过","重载","+","+","运算","符","，","封装","指针","移向","下一个","节点","的","过程","。","这样","用户","在","想要","访问","容器","内","元素","的","时候","，","无需","关注","容器","内部","实现","细节","，","只","需","通过","迭","代","器","对象","，","调用","+","+","即可","访问","下一个","元素","了","。","迭","代","器","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","自定义","的","节点","typeef","struct","Noe","&","#","123",";","nt","Data",";","struct","Noe","*","pNext",";","&","#","125",";","NODE",";","&","#","x","2","F",";","&","#","x","2","F",";","自定义","的","某种","容器","class","MyLst","&","#","123",";","publc",":","MyLst","(",")",":","m","_","pHea","(","NULL",")",",","m","_","pTal","(","NULL",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","添加","元素","o","A","(","nt","NewData",")","&","#","123",";","NODE","*","pNewNoe","&","#","x","3","D",";","new","Noe","(",")",";","pNewNoe","-","Data","&","#","x","3","D",";","NewData",";","pNewNoe","-","pNext","&","#","x","3","D",";","NULL",";","f","(","NULL","&","#","x","3","D",";","&","#","x","3","D",";","m","_","pHea",")","&","#","123",";","m","_","pHea","&","#","x","3","D",";","pNewNoe",";","m","_","pTal","&","#","x","3","D",";","m","_","pHea",";","&","#","125",";","else","&","#","123",";","m","_","pTal","-","pNext","&","#","x","3","D",";","pNewNoe",";","m","_","pTal","&","#","x","3","D",";","m","_","pTal","-","pNext",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","获取","头","指针","位置","Noe","*","Begn","(",")","&","#","123",";","return","m","_","pHea",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","获取","尾","指针","位置","Noe","*","En","(",")","&","#","123",";","return","m","_","pTal","-","pNext",";","&","#","125",";","prate",":","NODE","*","m","_","pHea",";","NODE","*","m","_","pTal",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","自定义","容器","对应","的","迭","代","器类","class","MyLstIterator","&","#","123",";","publc",":","MyLstIterator","(","Noe","*","pNoe","&","#","x","3","D",";","NULL",")","&","#","123",";","m","_","pCurrentNoe","&","#","x","3","D",";","pNoe",";","&","#","125",";","Noe","*","operator","&","#","x","3","D",";","(","Noe","*","pNoe",")","&","#","123",";","m","_","pCurrentNoe","&","#","x","3","D",";","pNoe",";","return","m","_","pCurrentNoe",";","&","#","125",";","nt","operator","*","(",")","&","#","123",";","return","m","_","pCurrentNoe","-","Data",";","&","#","125",";","MyLstIterator","&","amp",";","operator","+","+","(",")","&","#","123",";","m","_","pCurrentNoe","&","#","x","3","D",";","m","_","pCurrentNoe","-","pNext",";","return","*","ths",";","&","#","125",";","prate",":","NODE","*","m","_","pCurrentNoe",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","先","向","自定义","容器","中","填充","数据","MyLst","oLst",";","oLst",".","A","(","1",")",";","oLst",".","A","(","2",")",";","&","#","x","2","F",";","&","#","x","2","F",";","访问","并","输出","MyLstIterator","oIterator","&","#","x","3","D",";","oLst",".","Begn","(",")",";","cout","*","oIterator","enl",";","+","+","oIterator",";","cout","*","oIterator","enl",";","return","0",";","&","#","125",";","控制台","输出","结果","1","2","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/","title":"迭代器模式","content":"简介\n迭代器模式：一种行为型设计模式\n应用场景：刚学习C++STL容器的时候，自然也学习了迭代器。当时很不懂为什么指针可以解决的问题，要封成一个表现和指针很类似的类，还起了个新名词叫迭代器。后来对多种数据结构的应用渐渐有了了解之后，大...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:50:32"},{"word":["策略","模式","：","一种","行为","型","设计","模式","应用","场景","：","在","GOF","的","《","设计","模式",":","可","复用","面向","对象","软件","的","基础","》","中","是","这样","定义","的","：","将","一系列","的","算法","一个个","封装","起来","，","并且","使","它们","可","相互","替换","。","策略","模式","使得","算法","可","独","立于","使用","它","的","客户","而","变化","。","对于","同一","流程","中","不同的","需求","，","对","数据","的","处理","算法","可能会","变更","，","所以","将","处理","数据","的","算法","单独","抽离","出去","，","形成","一系列","算法","类","，","可以","相互","替换","。","举例","：","《","大话","设计","模式","》","中举","了","一个","很好","的","例子","。","商场","经常","会","推出","不同的","优惠活动","，","对于","结账","流程","来说","，","不同的","优惠活动","会","使用","不同的","算法","处理","账单","总额","。","所以","抽离","出","一个","算法","的","基类","，","提供","统一","的","用于","计算","折","后","价","的","接口","，","然后","所","有的","算法","都","在","派生","类","中","实现","各自","的","方法","。","切换","商场","类","中的","算法","指针","所","指向","的","算法","类","，","即可","切换","调用","的","算法","。","实现","方式","：","所有","算法","类","派生","自","同一","基类","，","实现","统一","的","计算","接口","。","商场","类","中","使用","成员","指针","指向","具体的","算法","类","，","结账","时","通过","该","指针","调用","算法","。","策略","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","策略","基类","class","Strategy","&","#","123",";","publc",":","rtual","float","Calculate","(","float","fTotal",")","&","#","x","3","D",";","0",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","策略","A","，","打","8","折","class","StrategyA",":","publc","Strategy","&","#","123",";","publc",":","rtual","float","Calculate","(","float","fTotal",")","&","#","123",";","prntf","(","&","quot",";","优惠活动","，","全","部","8","折","\\","n","&","quot",";",")",";","return","fTotal","*","0.8",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","策略","B","，","打","7","折","class","StrategyB",":","publc","Strategy","&","#","123",";","publc",":","rtual","float","Calculate","(","float","fTotal",")","&","#","123",";","prntf","(","&","quot",";","优惠活动","，","全","部","7","折","\\","n","&","quot",";",")",";","return","fTotal","*","0.7",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","策略","C","，","满","300","减","100","class","StrategyC",":","publc","Strategy","&","#","123",";","publc",":","rtual","float","Calculate","(","float","fTotal",")","&","#","123",";","prntf","(","&","quot",";","优惠活动","，","满","300","减","100","\\","n","&","quot",";",")",";","float","fFnal","&","#","x","3","D",";","fTotal","-","statc","_","castnt","(","fTotal","&","#","x","2","F",";","300",")","*","100",";","return","fFnal",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","商场","类","class","Shop","&","#","123",";","publc",":","Shop","(","Strategy","*","pStrategy","&","#","x","3","D",";","NULL",")",":","m","_","pStrategy","(","pStrategy",")","&","#","123",";","&","#","125",";","~","Shop","(",")","&","#","123",";","f","(","m","_","pStrategy",")","&","#","123",";","elete","m","_","pStrategy",";","m","_","pStrategy","&","#","x","3","D",";","NULL",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","设置","商场","策略","o","SetStrategy","(","Strategy","*","pStrategy",")","&","#","123",";","f","(","m","_","pStrategy",")","&","#","123",";","elete","m","_","pStrategy",";","&","#","125",";","m","_","pStrategy","&","#","x","3","D",";","pStrategy",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","调用","策略","类","的","计算方法","计算","折","后","价","o","CalculatePay","(","float","fTotal",")","&","#","123",";","f","(","m","_","pStrategy",")","&","#","123",";","float","fFnal","&","#","x","3","D",";","m","_","pStrategy","-","Calculate","(","fTotal",")",";","prntf","(","&","quot",";","原价",":","%",".","2","f","元",",","折","后",":","%",".","2","f","元","\\","n","&","quot",";",",","fTotal",",","fFnal",")",";","&","#","125",";","else","&","#","123",";","prntf","(","&","quot",";","无","活动","，","总价",":","%",".","2","f","元","\\","n","&","quot",";",",","fTotal",")",";","&","#","125",";","&","#","125",";","prate",":","Strategy","*","m","_","pStrategy",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","Shop","oShop",";","oShop",".","CalculatePay","(","400",")",";","oShop",".","SetStrategy","(","new","StrategyA","(",")",")",";","oShop",".","CalculatePay","(","400",")",";","oShop",".","SetStrategy","(","new","StrategyB","(",")",")",";","oShop",".","CalculatePay","(","400",")",";","oShop",".","SetStrategy","(","new","StrategyC","(",")",")",";","oShop",".","CalculatePay","(","400",")",";","return","0",";","&","#","125",";","控制台","输出","结果","无","活动","，","总价",":","400.00","元","优惠活动","，","全","部","8","折","原价",":","400.00","元",",","折","后",":","320.00","元","优惠活动","，","全","部","7","折","原价",":","400.00","元",",","折","后",":","280.00","元","优惠活动","，","满","300","减","100","原价",":","400.00","元",",","折","后",":","300.00","元","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/","title":"策略模式","content":"策略模式：一种行为型设计模式\n应用场景：在GOF的《设计模式:可复用面向对象软件的基础》中是这样定义的：将一系列的算法一个个封装起来，并且使它们可相互替换。策略模式使得算法可独立于使用它的客户而变化。对于同一流程中不同的需求，对数据的...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:49:00"},{"word":["简介","备忘","录","模式","：","一种","行为","型","设计","模式","应用","场景","：","备忘","录","模式","是","对","原型","模式","的","进一步","思考","，","因为","有些","时候","我们","并不","需要","一个","完整","对象","的","拷贝","，","只","需要","拷贝","对象","的","一部分","数据","作为","备份","即可","。","最","典型","的","例子","是","虚拟机","VWware","，","它","的","快照","功能","用以","保存","系统","当前","状态","以便","日后","恢复","。","但","如果","是","使用","原型","模式","实现","这个","功能","，","每次","快照","时","都","需要","生成","一个","完整的","系统","文件","，","是非","常","占用","空间","的","。","于是","便","进一步","思考","，","备份","的","时候","只","备份","系统","中","必要的","状态","信息","，","日后","通过","这","份","不","完整的","备份","信息","，","也","可以","使","系统","恢复","到","快照","中的","状态","，","就","可以","避免","无用","的","备份","信息","占用","空间","。","每次","的","快照","就是","备忘","记录","，","再","指定","一个","管理者","来","管理所","有的","快照","，","这","就是","备忘","录","模式","。","举例","：","假设","有","一个","游戏","角色","，","它","有","很多","属性","，","如","姓名","、","血量","、","攻击力","等","，","在","存档","备份","的","时候","并不","需要","生成","一个","完整的","角色","对象","作为","拷贝","，","只","需要","存储","血量","、","攻击力","即可","，","因为","姓名","不会","随着","游戏","进度","更改","。","实现","方式","：","为","角色","类","创建","一个","对应","的","备份","类","，","该类","中","只","将","必要的","备份","信息","作为","成员","变量","在","角色","类","中","实现","一个","方法","，","该","方法","创建","一个","备份","类","对象","作为","返回","值","。","然后","再创","建","一个","管理者","类","，","使用","容器","存放","备份","类","对象","。","备忘","录","模式","的","简单","代码","实现","#","nclue","ostream","#","nclue","strng","#","nclue","ector","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","单","条","备忘","的","记录","class","Memento","&","#","123",";","publc",":","Memento","(","unt","32","_","t","uLeel",",","unt","32","_","t","uHp",",","unt","32","_","t","uAttack",")",":","m","_","uLeel","(","uLeel",")",",","m","_","uHp","(","uHp",")",",","m","_","uAttack","(","uAttack",")","&","#","123",";","&","#","125",";","publc",":","unt","32","_","t","m","_","uLeel",";","unt","32","_","t","m","_","uHp",";","unt","32","_","t","m","_","uAttack",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","需要","保存","的","数据","类","class","GameRole","&","#","123",";","publc",":","GameRole","(","strng","strName",")",":","m","_","strName","(","strName",")",",","m","_","uLeel","(","1",")",",","m","_","uHp","(","100",")",",","m","_","uAttack","(","10",")","&","#","123",";","&","#","125",";","o","Show","(",")","&","#","123",";","cout","&","quot",";","Name",":","&","quot",";","m","_","strName","&","quot",";","Leel",":","&","quot",";","m","_","uLeel","&","quot",";","HP",":","&","quot",";","m","_","uHp","&","quot",";","ATK",":","&","quot",";","m","_","uAttack","enl",";","&","#","125",";","Memento","*","Sae","(",")","&","#","123",";","Memento","*","pSaeInfo","&","#","x","3","D",";","new","Memento","(","m","_","uLeel",",","m","_","uHp",",","m","_","uAttack",")",";","return","pSaeInfo",";","&","#","125",";","o","Loa","(","Memento","*","pMem",")","&","#","123",";","m","_","uLeel","&","#","x","3","D",";","pMem","-","m","_","uLeel",";","m","_","uHp","&","#","x","3","D",";","pMem","-","m","_","uHp",";","m","_","uAttack","&","#","x","3","D",";","pMem","-","m","_","uAttack",";","cout","&","quot",";","Loae","&","quot",";","enl",";","&","#","125",";","prate",":","strng","m","_","strName",";","publc",":","unt","32","_","t","m","_","uLeel",";","unt","32","_","t","m","_","uHp",";","unt","32","_","t","m","_","uAttack",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","备忘","管理者","class","Recorer","&","#","123",";","publc",":","o","Recor","(","Memento","*","pMem",")","&","#","123",";","ecMemento",".","push","_","back","(","pMem",")",";","cout","&","quot",";","Sae","&","quot",";","enl",";","&","#","125",";","Memento","*","Get","(","unt","32","_","t","uInex",")","&","#","123",";","return","ecMemento","[","uInex","]",";","&","#","125",";","prate",":","ectorMemento","*","ecMemento",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","Recorer","oRecorer",";","GameRole","oPlayer","(","&","quot",";","Mark","&","quot",";",")",";","oPlayer",".","Show","(",")",";","oRecorer",".","Recor","(","oPlayer",".","Sae","(",")",")",";","oPlayer",".","m","_","uLeel","&","#","x","3","D",";","100",";","oPlayer",".","m","_","uHp","&","#","x","3","D",";","1000",";","oPlayer",".","m","_","uAttack","&","#","x","3","D",";","100",";","oPlayer",".","Show","(",")",";","oPlayer",".","Loa","(","oRecorer",".","Get","(","0",")",")",";","oPlayer",".","Show","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","Name",":","Mark","Leel",":","1","HP",":","100","ATK",":","10","Sae","Name",":","Mark","Leel",":","100","HP",":","1000","ATK",":","100","Loae","Name",":","Mark","Leel",":","1","HP",":","100","ATK",":","10","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B/%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/","title":"备忘录模式","content":"简介\n备忘录模式：一种行为型设计模式\n\n应用场景：备忘录模式是对原型模式的进一步思考，因为有些时候我们并不需要一个完整对象的拷贝，只需要拷贝对象的一部分数据作为备份即可。最典型的例子是虚拟机VWware，它的快照功能用以保存系统当前状...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:48:00"},{"word":["简介","组合","模式","：","一种","结构","型","设计","模式","应用","场景","：","对象","需要","组合","成","树形","结构","以","表示","“","部分","-","整体","”","的","层次","结构","时","。","举例","：","一家","公司","的","OA","系统","（","Offce","Automaton",",","自动化","办公","）","，","公司","部门","为","多级","结构","，","分为","一级","、","二级","、","三级","部门","，","为","表现","这种","系统","的","层次","结构","，","可以","考虑","组合","模式","实现","方式","：","首先","，","创建","所有","部门","的","共有","基类","，","封装","共用","的","方法","。","然后","，","在","基类","中","添加","用于","存放","子","部门","的","容器","，","对子","部门","执行","的","操作","，","通过","迭","代","该","容器","来","完成","。","并","封装","向","容器","中","添加","和","删除","子","部门","的","方法","。","最后","，","各级","部","门类","继承","自","该","基类","，","并","增添","各自","的","方法","。","备注","：","内存","管理","可以","在","基类","中","实现","。","优点","：","可以","清楚地","定义","分层","次","的","复杂","对象","，","并","可以","不断","组合","。","缺点","：","1",".","将","子","部门","容器","与","添加","删除","方法","放","在","基类","中","，","会","使","所有","部门","都","有","该","容器","与","方法","。","但","有些","没有","子","部门","的","部门","，","在","逻辑","上","不","应","该","有","这些","。","2",".","如果","不","将","子","部门","容器","与","添加","删除","方法","放","在","基类","中","，","则","有","子","部门","但是","功能","不同的","各部门","需要","在","继承","时","重复","实现","容器","与","方法","，","代码","重","复会","很多","。","3",".","对","哦","，","如果","把","有","子","部门","的","部门","抽象","出","一个","继承","自","基类","的","抽象","类","，","可能会","解决","这个问题","吧","？","稍后","我","会","试一试","组合","模式","的","简单","代码","实现","#","nclue","ostream","#","nclue","lst","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","部门","抽象","类","class","Department","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","构造","，","传入","部门","名称","作为","部门","标记","Department","(","strng","strName",")",":","m","_","strName","(","strName",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","内存","管理","，","析构时析构","所有","下属","部门","rtual","~","Department","(",")","&","#","123",";","cout","m","_","strName","&","quot",";","部门","解散","&","quot",";","enl",";","&","#","x","2","F",";","&","#","x","2","F",";","下属","部门","析构","lstDepartment","*",":",":","terator","Iter","&","#","x","3","D",";","m","_","lstDep",".","begn","(",")",";","for","(",";","Iter","!","&","#","x","3","D",";","m","_","lstDep",".","en","(",")",";","+","+","Iter",")","&","#","123",";","f","(","NULL","!","&","#","x","3","D",";","(","*","Iter",")",")","&","#","123",";","elete","(","*","Iter",")",";","(","*","Iter",")","&","#","x","3","D",";","NULL",";","&","#","125",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","获取","部门","名称","的","方法","strng","GetName","(",")","&","#","123",";","return","m","_","strName",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","展示","所有","下属","部门","名称","rtual","o","ShowSubDep","(",")","&","#","123",";","cout","m","_","strName","&","quot",";","部门","下属","部门","：","&","quot",";",";","lstDepartment","*",":",":","terator","Iter","&","#","x","3","D",";","m","_","lstDep",".","begn","(",")",";","for","(",";","Iter","!","&","#","x","3","D",";","m","_","lstDep",".","en","(",")",";","+","+","Iter",")","&","#","123",";","cout","&","quot",";","&","quot",";","(","*","Iter",")","-","GetName","(",")",";","&","#","125",";","cout","enl",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","添加","下属","部门","并","打印","信息","o","ADepartment","(","Department","*","pDep",")","&","#","123",";","m","_","lstDep",".","push","_","back","(","pDep",")",";","cout","m","_","strName","&","quot",";","部门","增加","了","下属","的","&","quot",";","pDep","-","GetName","(",")","&","quot",";","部门","&","quot",";","enl",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","删除","下属","部门","并","打印","信息","o","DelDepartment","(","Department","*","pDep",")","&","#","123",";","lstDepartment","*",":",":","terator","Iter","&","#","x","3","D",";","m","_","lstDep",".","begn","(",")",";","for","(",";","Iter","!","&","#","x","3","D",";","m","_","lstDep",".","en","(",")",";","+","+","Iter",")","&","#","123",";","f","(","pDep","&","#","x","3","D",";","&","#","x","3","D",";","(","*","Iter",")",")","&","#","123",";","cout","m","_","strName","&","quot",";","部门","删除","了","下属","的","&","quot",";","pDep","-","GetName","(",")","&","quot",";","部门","&","quot",";","enl",";","elete","(","*","Iter",")",";","m","_","lstDep",".","erase","(","Iter",")",";","break",";","&","#","125",";","&","#","125",";","&","#","125",";","prate",":","strng","m","_","strName",";","&","#","x","2","F",";","&","#","x","2","F",";","部门","名称","lstDepartment","*","m","_","lstDep",";","&","#","x","2","F",";","&","#","x","2","F",";","存放","下属","部门","的","列表","，","用","列表","为了","方便","增删","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","一级","部门","class","FrstLeelDepartment",":","publc","Department","&","#","123",";","publc",":","FrstLeelDepartment","(","strng","strName",")",":","Department","(","strName",")","&","#","123",";","&","#","125",";","rtual","~","FrstLeelDepartment","(",")","&","#","123",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","二级","部门","class","SeconLeelDepartment",":","publc","Department","&","#","123",";","publc",":","SeconLeelDepartment","(","strng","strName",")",":","Department","(","strName",")","&","#","123",";","&","#","125",";","rtual","~","SeconLeelDepartment","(",")","&","#","123",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","三级","部门","class","ThrLeelDepartment",":","publc","Department","&","#","123",";","publc",":","ThrLeelDepartment","(","strng","strName",")",":","Department","(","strName",")","&","#","123",";","&","#","125",";","rtual","~","ThrLeelDepartment","(",")","&","#","123",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","#","nclue","ostream","#","nclue","composte",".","hpp","usng","namespace","st",";","nt","man","(",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","1级","部门","A","1","Department","*","pFstLA","&","#","x","3","D",";","new","FrstLeelDepartment","(","&","quot",";","A","1","&","quot",";",")",";","&","#","x","2","F",";","&","#","x","2","F",";","2级","部门","B","2","、","C","2","、","D","2","Department","*","pSnLB","&","#","x","3","D",";","new","SeconLeelDepartment","(","&","quot",";","B","2","&","quot",";",")",";","Department","*","pSnLC","&","#","x","3","D",";","new","SeconLeelDepartment","(","&","quot",";","C","2","&","quot",";",")",";","Department","*","pSnLD","&","#","x","3","D",";","new","SeconLeelDepartment","(","&","quot",";","D","2","&","quot",";",")",";","&","#","x","2","F",";","&","#","x","2","F",";","3级","部门","E","3","、","F","3","、","G","3","、","H","3","Department","*","PTrLE","&","#","x","3","D",";","new","ThrLeelDepartment","(","&","quot",";","E","3","&","quot",";",")",";","Department","*","PTrLF","&","#","x","3","D",";","new","ThrLeelDepartment","(","&","quot",";","F","3","&","quot",";",")",";","Department","*","PTrLG","&","#","x","3","D",";","new","ThrLeelDepartment","(","&","quot",";","G","3","&","quot",";",")",";","Department","*","PTrLH","&","#","x","3","D",";","new","ThrLeelDepartment","(","&","quot",";","H","3","&","quot",";",")",";","&","#","x","2","F",";","&","#","x","2","F",";","组建","树形","结构","cout","&","quot",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","组建","部门","结构","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","quot",";","enl",";","pFstLA","-","ADepartment","(","pSnLB",")",";","pFstLA","-","ADepartment","(","pSnLC",")",";","pFstLA","-","ADepartment","(","pSnLD",")",";","pSnLB","-","ADepartment","(","PTrLE",")",";","pSnLB","-","ADepartment","(","PTrLF",")",";","pSnLC","-","ADepartment","(","PTrLG",")",";","pSnLD","-","ADepartment","(","PTrLH",")",";","&","#","x","2","F",";","&","#","x","2","F",";","展示","一级","部门","A","所有","子","部门","cout","&","quot",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","展示","子","部门","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","quot",";","enl",";","pFstLA","-","ShowSubDep","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","删除","A","下属","二级","部门","B","cout","&","quot",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","解散","子","部门","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","quot",";","enl",";","pFstLA","-","DelDepartment","(","pSnLB",")",";","&","#","x","2","F",";","&","#","x","2","F",";","析构","，","资源","回收","cout","&","quot",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","开始","析构","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","quot",";","enl",";","elete","pFstLA",";","return","0",";","&","#","125",";","控制台","输出","结果","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","组建","部门","结构","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","A","1","部门","增加","了","下属","的","B","2","部门","A","1","部门","增加","了","下属","的","C","2","部门","A","1","部门","增加","了","下属","的","D","2","部门","B","2","部门","增加","了","下属","的","E","3","部门","B","2","部门","增加","了","下属","的","F","3","部门","C","2","部门","增加","了","下属","的","G","3","部门","D","2","部门","增加","了","下属","的","H","3","部门","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","展示","子","部门","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","A","1部","门下","属","部门","：","B","2","C","2","D","2","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","解散","子","部门","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","A","1","部门","删除","了","下属","的","B","2","部门","B","2","部门","解散","E","3","部门","解散","F","3","部门","解散","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","开始","析构","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","A","1","部门","解散","C","2","部门","解散","G","3","部门","解散","D","2","部门","解散","H","3","部门","解散","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/","title":"组合模式","content":"简介\n组合模式：一种结构型设计模式\n应用场景：对象需要组合成树形结构以表示“部分-整体”的层次结构时。\n\n举例：一家公司的OA系统（Office Automation, 自动化办公），公司部门为多级结构，分为一级、二级、三级部门，为表...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:47:00"},{"word":["简介","装饰","模式","：","一种","结构","型","设计","模式","应用","场景","：","想要","动态","的","给","一个","对象","添加","功能","，","即","希望","可以","根据","需求","对","现有","对象","添加","不同的","功能","，","以及","不同","功能","的","相互","组合","。","如果","通过","继承","实现","功能","增加","，","则","为","了","各","功能","的","组合","，","需要","将","不同","功能","排列","组合","形成","数量","爆炸","的","一堆","子类","。","此时","可以","考虑","装饰","模式","举例","：","游戏","中的","人物","和","时装","。","人物","可以","选择","穿上","帽子","或","穿上","鞋子","，","或者","都","穿上","，","通过","方法","展示","穿","搭","结果","。","比较","容易","想到","的","实现","方法","就是","单纯","通过","继承","，","一个","人物","基类","，","继承","出","一个","穿","帽子","的","人物","类","，","一个","穿","鞋子","的","人物","类","，","再一个","穿","帽子","+","鞋子","的","人物","类","。","在","只","有","两种","选择","时","，","需要","产生","3个","子类","，","这种","实现","方式","每","增加","一种","选择","就要","增加一倍","+","1","数量","的","子类","，","非常","不","可取","。","实现","方式","：","第一步","，","抽象","出","一个","装饰","基类","，","类","中","添加","一个人","物类","指针","，","在","构造","时","传入","人物","类","指针","。","第二步","，","增加","需要","修饰","的","同名","方法","，","在","方法","中","通过","指针","调用","原","方法","，","再","添加","新","修饰","内容","。","第三步","，","将","装饰","基类","继承","自","人物","基类","，","为","了","使","传入","装饰","类","A","进行","装饰","的","指针","能够","传入","装饰","类","B","进行","其他","装饰","，","并且","使","传入","装饰","类","A","的","指针","可以","指向","该","装饰","类","对象","。","最后","一步","，","实现","装饰","基类","，","实现","装饰","内容","。","备注","：","为什么","装饰","类","中","增加","的","方法","要","与","被","装饰","方法","同名","呢","。","因为","在","第三步","中","，","为了","需求","，","传入","装饰","类","的","指针","，","不一定","指向","的","是","人物","基类","对象","，","也","可能","是","另一个","装饰","类","对象","。","所以","为了","其他","装饰","类","中","通过","指针","调用","的","原","方法","存在","，","对","原","方法","装饰","后","的","方法","要","与","原","方法","同名","。","优点","：","可以","动态","为","对象","添加","功能","，","相比","于","继承","实现","，","组合的","方式","更加","灵活","而且","代码","量","小","很多","缺点","：","减少","了","类","的","数量","，","但是","在","装饰","的","过程","中","每一步","都会","产生","一个","对象","，","对于","ebug","来说","会","困难","很多","，","因为","中间","每一步","产生","的","对象","都","很","像","。","装饰","模式","的","简单","代码","实现","#","fnef","DECORATOR","_","HPP","#","efne","DECORATOR","_","HPP","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","人物","基类","class","Man","&","#","123",";","publc",":","rtual","~","Man","(",")","&","#","123",";","&","#","125",";","rtual","o","Show","(",")","&","#","x","2","F",";","&","#","x","2","F",";","用于","展示","&","#","123",";","cout","&","quot",";","A","man",".","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","装饰","器","抽象","类","class","ManWthCloth",":","publc","Man","&","#","x","2","F",";","&","#","x","2","F",";","继承","自","Man","，","为了","使","被","装饰","的","对象","可以","传入","其他","装饰","器","进行","组合","装饰","&","#","123",";","publc",":","ManWthCloth","(","Man","*","pMan",")",":","m","_","pMan","(","pMan",")","&","#","123",";","&","#","125",";","rtual","~","ManWthCloth","(",")","&","#","123",";","f","(","NULL","!","&","#","x","3","D",";","m","_","pMan",")","&","#","123",";","elete","m","_","pMan",";","m","_","pMan","&","#","x","3","D",";","NULL",";","&","#","125",";","&","#","125",";","rtual","o","Show","(",")","&","#","x","2","F",";","&","#","x","2","F",";","上述","实现","方式","中的","第二步","&","#","123",";","m","_","pMan","-","Show","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","通过","指针","调用","原","指针","所指","对象","的","方法","，","然后","添加","方法","进行","修饰","DressUp","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","对","原","方法","增加","修饰","&","#","125",";","rtual","o","DressUp","(",")","&","#","x","3","D",";","0",";","&","#","x","2","F",";","&","#","x","2","F",";","修饰","方法","在","实现","类","中","实现","prate",":","Man","*","m","_","pMan",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","装饰","器","实现","类","class","ManWearAHat",":","publc","ManWthCloth","&","#","123",";","publc",":","ManWearAHat","(","Man","*","pMan",")",":","ManWthCloth","(","pMan",")","&","#","123",";","&","#","125",";","rtual","o","DressUp","(",")","&","#","123",";","cout","&","quot",";","Wear","a","Hat",".","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","class","ManWearShoes",":","publc","ManWthCloth","&","#","123",";","publc",":","ManWearShoes","(","Man","*","pMan",")",":","ManWthCloth","(","pMan",")","&","#","123",";","&","#","125",";","rtual","o","DressUp","(",")","&","#","123",";","cout","&","quot",";","Wear","shoes",".","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","#","enf","&","#","x","2","F",";","&","#","x","2","F",";","DECORATOR","_","HPP","主","函数","中的","使用","#","nclue","ostream","#","nclue","&","quot",";","ecorator",".","hpp","&","quot",";","usng","namespace","st",";","nt","man","(",")","&","#","123",";","Man","*","pMan","&","#","x","3","D",";","new","Man","(",")",";","pMan","-","Show","(",")",";","cout","&","quot",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","Wear","Hat","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","quot",";","enl",";","pMan","&","#","x","3","D",";","new","ManWearAHat","(","pMan",")",";","pMan","-","Show","(",")",";","cout","&","quot",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","Wear","Shoes","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","quot",";","enl",";","pMan","&","#","x","3","D",";","new","ManWearShoes","(","pMan",")",";","pMan","-","Show","(",")",";","elete","pMan",";","pMan","&","#","x","3","D",";","NULL",";","return","0",";","&","#","125",";","控制台","输出","结果","A","man",".","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","Wear","Hat","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","A","man",".","Wear","a","Hat",".","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","Wear","Shoes","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","A","man",".","Wear","a","Hat",".","Wear","Shoes",".","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/","title":"装饰模式","content":"简介\n装饰模式：一种结构型设计模式\n应用场景：想要动态的给一个对象添加功能，即希望可以根据需求对现有对象添加不同的功能，以及不同功能的相互组合。如果通过继承实现功能增加，则为了各功能的组合，需要将不同功能排列组合形成数量爆炸的一堆子类...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:46:00"},{"word":["简介","享","元","模式","：","一种","结构","型","设计","模式","应用","场景","：","想象","这样","一个","场景","，","设计","一个","两","人","下棋","的","小游戏","。","一方","持","黑","，","一方","持","白，","在","玩家","点击","棋盘","时","，","将","对应","颜色","的","棋子","画","在","棋盘","上","。","对于","白子","来说","，","其","属性","包括","形状","、","颜色","和","位置","等","。","其中","形状","和","颜色","，","对于","一方","而言","，","每次","摆放","时","都是","相同","的","属性","，","不同的","只","有","位置","。","所以","如果","每次","摆放","时","都","重新","对","棋子","对象","设置","所有","的","属性","然后","描绘","在","棋盘","上","，","是","没有必要","的","。","如果","在","每局","开始","第一次","设置","棋子","对象","属性","后","，","将","其","保存","起来","，","之后","再取","时","，","只","需","更改","其","坐标","属性","，","而","不用","重新","构造","对象","。","省去","了","每次","构造","的","成本","。","实现","方式","：","创建","一个","棋子","工厂","类","，","在","其中","使用","键值","容器","map","，","根据","棋子","的","颜色","属性","作为","键值","。","每次","取","属性","对象","时","，","在","map","中","进行","寻找","，","如果","不存在","，","则","创建","新","对象","并","设置","颜色","等","不变","属性","，","如果","已经","存","在","，","则","直接","返回","已有","对象","。","从","工厂","获得","棋子","后","只","重新","设置","其","坐标","属性","，","然后","进行","棋盘","上","的","描画","。","享","元","模式","的","简单","代码","实现","#","nclue","ostream","#","nclue","strng","#","nclue","map","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","棋子","坐标","struct","POINT","&","#","123",";","nt","m","_","x",";","nt","m","_","y",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","棋子","类","class","CPeces","&","#","123",";","publc",":","CPeces","(","strng","strColor",")",":","m","_","strColor","(","strColor",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","设置","棋子","坐标","的","方法","o","SetPoston","(","nt","x",",","nt","y",")","&","#","123",";","m","_","stPoston",".","m","_","x","&","#","x","3","D",";","x",";","m","_","stPoston",".","m","_","y","&","#","x","3","D",";","y",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","将","棋子","按照","属性","描画","在","棋盘","上","o","Draw","(",")","&","#","123",";","cout","&","quot",";","Draw","a","&","quot",";","m","_","strColor","&","quot",";","pece",",","at","poston","&","quot",";","m","_","stPoston",".","m","_","x","&","quot",";","-","&","quot",";","m","_","stPoston",".","m","_","y","enl",";","&","#","125",";","prate",":","strng","m","_","strColor",";","POINT","m","_","stPoston",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","棋子","工厂","类","class","CPecesFactory","&","#","123",";","publc",":","CPeces","*","GetPece","(","strng","strColor",")","&","#","123",";","f","(","NULL","&","#","x","3","D",";","&","#","x","3","D",";","mapPeces","[","strColor","]",")","&","#","x","2","F",";","&","#","x","2","F",";","如果","map","中原","来","没有","&","#","123",";","CPeces","*","pNewPeces","&","#","x","3","D",";","new","CPeces","(","strColor",")",";","cout","&","quot",";","Create","a","new","&","quot",";","strColor","&","quot",";","Pece","&","quot",";","enl",";","mapPeces","[","strColor","]","&","#","x","3","D",";","pNewPeces",";","&","#","125",";","return","mapPeces","[","strColor","]",";","&","#","125",";","prate",":","mapstrng",",","CPeces","*","mapPeces",";","&","#","x","2","F",";","&","#","x","2","F",";","按照","棋子","颜色","属性","作为","键值","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","CPecesFactory","*","pFactory","&","#","x","3","D",";","new","CPecesFactory","(",")",";","cout","&","quot",";","-","-","-","-","-","Roun","1","-","-","-","-","-","&","quot",";","enl",";","CPeces","*","pPeceA","&","#","x","3","D",";","pFactory","-","GetPece","(","&","quot",";","Whte","&","quot",";",")",";","pPeceA","-","SetPoston","(","1",",","2",")",";","pPeceA","-","Draw","(",")",";","cout","&","quot",";","-","-","-","-","-","Roun","2","-","-","-","-","-","&","quot",";","enl",";","CPeces","*","pPeceB","&","#","x","3","D",";","pFactory","-","GetPece","(","&","quot",";","Black","&","quot",";",")",";","pPeceB","-","SetPoston","(","3",",","4",")",";","pPeceB","-","Draw","(",")",";","cout","&","quot",";","-","-","-","-","-","Roun","3","-","-","-","-","-","&","quot",";","enl",";","CPeces","*","pPeceC","&","#","x","3","D",";","pFactory","-","GetPece","(","&","quot",";","Whte","&","quot",";",")",";","pPeceC","-","SetPoston","(","5",",","6",")",";","pPeceC","-","Draw","(",")",";","cout","&","quot",";","-","-","-","-","-","Roun","4","-","-","-","-","-","&","quot",";","enl",";","CPeces","*","pPeceD","&","#","x","3","D",";","pFactory","-","GetPece","(","&","quot",";","Black","&","quot",";",")",";","pPeceD","-","SetPoston","(","7",",","8",")",";","pPeceD","-","Draw","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","-","-","-","-","-","Roun","1","-","-","-","-","-","Create","a","new","Whte","pece","Draw","a","Whte","pece",",","at","poston","1","-","2","-","-","-","-","-","Roun","2","-","-","-","-","-","Create","a","new","Black","pece","Draw","a","Black","pece",",","at","poston","3","-","4","-","-","-","-","-","Roun","3","-","-","-","-","-","Draw","a","Whte","pece",",","at","poston","5","-","6","-","-","-","-","-","Roun","4","-","-","-","-","-","Draw","a","Black","pece",",","at","poston","7","-","8","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/","title":"享元模式","content":"简介\n享元模式：一种结构型设计模式\n应用场景：想象这样一个场景，设计一个两人下棋的小游戏。一方持黑，一方持白，在玩家点击棋盘时，将对应颜色的棋子画在棋盘上。对于白子来说，其属性包括形状、颜色和位置等。其中形状和颜色，对于一方而言，每次...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:45:00"},{"word":["简介","外观","模式","：","一种","结构","型","设计","模式","应用","场景","：","外观","模式","应用","很多","。","执行","一个","过程","，","中间","有","很多","子","过程","，","子","过程","的","顺序","必须","固定","，","但是","不需要","执行","这个","过程","的","用户","知道","。","这时","应该","考虑","外观","模式","，","也","称为","门面","模式","。","举例","：","用","sual","stuo","写","好","代码","后","，","只","需要","按","一下","F","7","就","可以","等待","编译","完成","了","。","但是","编译","期间","的","步骤","是","逐一","进行","的","，","会","先","对","代码","进行","语义","分析","，","然后","生成","中间","代码","，","再生","成","汇编","代码","，","最后","链接","库","，","编译","才","全部","完成","。","这个","F","7","便是","一种","外观","模式","，","在","按","下","的","同时","，","并不","需要","知道","编译","期间","的","各个","步骤","，","也","可以","完成","编译","。","实现","方式","：","写","一个","外观","类","，","提供","一个","方法","，","将","需要","执行","的","子","过程","在","该","方法","中","逐一","调用","。","使用者","只","需要","使用","这","一个","外观","类","的","接口","而","无需","了解","所有","子","过程","的","接口","。","外观","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","语义","分析","class","CSyntaxParser","&","#","123",";","publc",":","statc","o","SyntaxParser","(",")","&","#","123",";","cout","&","quot",";","SyntaxParser","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","生成","中间","代码","class","CGenMCoe","&","#","123",";","publc",":","statc","o","GenMCoe","(",")","&","#","123",";","cout","&","quot",";","GenMCoe","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","生成","汇编","代码","class","CGenAssemblyCoe","&","#","123",";","publc",":","statc","o","GenAssemblyCoe","(",")","&","#","123",";","cout","&","quot",";","GenAssemblyCoe","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","链接","class","CLnkSystem","&","#","123",";","publc",":","statc","o","LnkSystem","(",")","&","#","123",";","cout","&","quot",";","LnkSystem","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","外观","模式","class","CFacae","&","#","123",";","publc",":","statc","o","Facae","(",")","&","#","123",";","CSyntaxParser",":",":","SyntaxParser","(",")",";","CGenMCoe",":",":","GenMCoe","(",")",";","CGenAssemblyCoe",":",":","GenAssemblyCoe","(",")",";","CLnkSystem",":",":","LnkSystem","(",")",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","CFacae",":",":","Facae","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","SyntaxParser","GenMCoe","GenAssemblyCoe","LnkSystem","外观","模式","和","单例","模式","搭配","使用","，","效果","更","佳","~","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/","title":"外观模式","content":"简介\n外观模式：一种结构型设计模式\n应用场景：外观模式应用很多。执行一个过程，中间有很多子过程，子过程的顺序必须固定，但是不需要执行这个过程的用户知道。这时应该考虑外观模式，也称为门面模式。\n\n举例：用visual studio写好代...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:44:00"},{"word":["简介","适配器","模式","：","一种","结构","型","设计","模式","应用","场景","：","类","A","中","想要","写","一个","很","复杂的","新方法","，","但是","该","方法","已经","在","类","B","中","实现","过","了","，","如果","重","复写","一次","，","代码","量","会","增加","很多","而且","代码","可读性","会","降低","举例","：","我国","的","市电","电压","是","220","V","，","但","很多","电器","正常","工作","所","需","的","电压","是","5","V","。","如果","为了","电器","使用","而","改变","市电","的","电压","，","工程","会","变得","很大","，","而且","不同的","电器","所","需","的","电压","各","不同","，","配合","电器","需求","而","更改","市电","电压","显然","是","不现实","的","，","所以","电器","都会","配备","一个","适配器","，","将","市电","的","220","V","转换","成","自己","所","需","的","电压","实现","方式","：","实现","方式","有","两种","。","第一种","，","类","适配器","，","使用","多","继承","的","方式","类","A","继承","自","类","B","，","即可","直接","调用","类","B","实现","过","的","方法","，","无需","重","复写","一次","该","方法","第二种","，","对象","适配器","，","使用","组合的","方式","类","A","中","增加","一个","类","B","的","指针","，","在","类","A","的","新方法","中","，","调用","类","B","中","已","实现","的","方法","优点","：","无需","重复","实现","与","测试","新方法","，","提高","了","效率","缺点","：","类","适配器","模式","，","由于","多","继承","，","可能会","出现","二","义性","对象","适配器","模式","，","如果","过多","使用","适配器","模式","，","会","导致","代码","阅读","难度","增大","类","适配器","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","市电","类","class","Electrcty","&","#","123",";","publc",":","rtual","o","Charge","(",")","&","#","x","2","F",";","&","#","x","2","F",";","使用","市电","进行","充电","，","输出","验证","电压","的","数值","&","#","123",";","cout","&","quot",";","220","V","chargng",".",".",".","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","适配器","类","class","Aapter","5","V","&","#","123",";","publc",":","o","Transfer","(",")","&","#","x","2","F",";","&","#","x","2","F",";","将","电压","转换","为","5","V","，","输出","验证","&","#","123",";","cout","&","quot",";","5","V","chargng",".",".",".","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","类","适配器","，","使用","多","继承","的","方式","class","ElecWthAapter","5","V",":","publc","Electrcty",",","Aapter","5","V","&","#","123",";","publc",":","rtual","o","Charge","(",")","&","#","x","2","F",";","&","#","x","2","F",";","重写","充电","方法","&","#","123",";","Transfer","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","直接","调用","适配器","电压","转换","方法","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","#","nclue","ostream","#","nclue","&","quot",";","ClassAapter",".","h","&","quot",";","usng","namespace","st",";","nt","man","(",")","&","#","123",";","Electrcty","*","pEle","&","#","x","3","D",";","new","Electrcty","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","如果","不","使用","适配器","pEle","-","Charge","(",")",";","Electrcty","*","pEleWthAapter","&","#","x","3","D",";","new","ElecWthAapter","5","V","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","使用","适配器","pEleWthAapter","-","Charge","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","220","V","chargng",".",".",".","5","V","chargng",".",".",".","以下","是","对象","适配器","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","市电","类","class","Electrcty","&","#","123",";","publc",":","rtual","o","Charge","(",")","&","#","x","2","F",";","&","#","x","2","F",";","使用","市电","进行","充电","，","输出","验证","电压","的","数值","&","#","123",";","cout","&","quot",";","220","V","chargng",".",".",".","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","适配器","类","class","Aapter","5","V","&","#","123",";","publc",":","o","Transfer","(",")","&","#","x","2","F",";","&","#","x","2","F",";","将","电压","转换","为","5","V","，","输出","验证","&","#","123",";","cout","&","quot",";","5","V","chargng",".",".",".","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","对象","适配器","class","ElecWthAapter","5","V",":","publc","Electrcty","&","#","123",";","publc",":","ElecWthAapter","5","V","(",")",":","pAapter","(","NULL",")","&","#","123",";","pAapter","&","#","x","3","D",";","new","Aapter","5","V","(",")",";","&","#","125",";","rtual","o","Charge","(",")","&","#","x","2","F",";","&","#","x","2","F",";","重写","充电","方法","&","#","123",";","pAapter","-","Transfer","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","通过","适配器","指针","，","调用","电压","转换","方法","&","#","125",";","prate",":","Aapter","5","V","*","pAapter",";","&","#","125",";",";","主","函数","中的","使用","#","nclue","ostream","#","nclue","&","quot",";","ObjectAapter",".","h","&","quot",";","usng","namespace","st",";","nt","man","(",")","&","#","123",";","Electrcty","*","pEle","&","#","x","3","D",";","new","Electrcty","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","如果","不","使用","适配器","pEle","-","Charge","(",")",";","Electrcty","*","pEleWthAapter","&","#","x","3","D",";","new","ElecWthAapter","5","V","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","使用","适配器","pEleWthAapter","-","Charge","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","220","V","chargng",".",".",".","5","V","chargng",".",".",".","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/","title":"适配器模式","content":"简介\n适配器模式：一种结构型设计模式\n应用场景：类A中想要写一个很复杂的新方法，但是该方法已经在类B中实现过了，如果重复写一次，代码量会增加很多而且代码可读性会降低\n\n举例：我国的市电电压是220V，但很多电器正常工作所需的电压是5V...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:43:00"},{"word":["简介","桥接","模式","：","一种","结构","型","设计","模式","应用","场景","：","一个","对象","由","多","部分","属性","组成","，","而","对象","与","属性","之间","的","关系","，","有些","为","has","a","，","有些","为","s","a","，","为了","更","灵活","也","更","合理地","实现","功能","，","应该","根据","对象","的","组成","关系","将","属性","抽象","举例","：","红色","的","圆","可以","继承","自","圆","的","抽象","类","，","而","不","应","继承","自","红色","的","抽象","类","，","因为","红色","对","它","来","说是","一个","拥有","的","属性","。","而且","，","如果","只","通过","圆","的","抽象","类","派生","出","一个","红色","圆","的","类","，","后续","可能","需要","增加","绿色","圆","、","蓝色","圆","甚至","绿色","三角","的","类","，","交叉","组合","会","产生","非常","多","的","类","，","所以","这时","应该","考虑","通过","逻辑","上","的","关系","，","分清","s","a","与","has","a","，","将","颜色","与","图形","的","关系","抽象","实现","方式","：","首先","，","将","颜色","抽象","，","创建","一个","颜色","的","抽象","类","然后","，","将","颜色","作为","图形","类","的","一个","属性","，","成为","图形","抽象","类","中的","一个","成员","变量","最后","，","相同","形状","不同","颜色","，","通过","更改","图形","类","中的","颜色","变量","来","实现","优点","：","将","抽象","和","实现","进行","分离","，","使","抽象","不用","依赖","于","实现","，","符合","依赖","倒置","原则","，","降低","了","耦合度","缺点","：","需要","在","程序设计","之","初","就","进行","抽象","与","分离","桥接","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","颜色","抽象","类","class","Color","&","#","123",";","publc",":","rtual","strng","GetColor","(",")","&","#","x","3","D",";","0",";","&","#","x","2","F",";","&","#","x","2","F",";","获取","颜色","，","用于","验证","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","颜色","实现","类","class","Re",":","publc","Color","&","#","123",";","publc",":","rtual","strng","GetColor","(",")","&","#","x","2","F",";","&","#","x","2","F",";","获取","颜色","，","用于","验证","&","#","123",";","return","&","quot",";","Re","&","quot",";",";","&","#","125",";","&","#","125",";",";","class","Blue",":","publc","Color","&","#","123",";","publc",":","rtual","strng","GetColor","(",")","&","#","x","2","F",";","&","#","x","2","F",";","获取","颜色","，","用于","验证","&","#","123",";","return","&","quot",";","Blue","&","quot",";",";","&","#","125",";","&","#","125",";",";","class","Green",":","publc","Color","&","#","123",";","publc",":","rtual","strng","GetColor","(",")","&","#","x","2","F",";","&","#","x","2","F",";","获取","颜色","，","用于","验证","&","#","123",";","return","&","quot",";","Green","&","quot",";",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","形状","抽象","类","class","Shape","&","#","123",";","publc",":","Shape","(","Color","*","pColor",")",":","m","_","pColor","(","pColor",")","&","#","123",";","&","#","125",";","rtual","o","Show","(",")","&","#","x","3","D",";","0",";","&","#","x","2","F",";","&","#","x","2","F",";","展示","接口","，","验证","实现","类","中","颜色","与","形状","protecte",":","Color","*","m","_","pColor",";","&","#","x","2","F",";","&","#","x","2","F",";","将","图形","的","颜色","抽象","，","与","形状","类桥接","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","形状","实现","类","class","Crcle",":","publc","Shape","&","#","123",";","publc",":","Crcle","(","Color","*","pColor",")",":","Shape","(","pColor",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","构造","圆形","时","指定","颜色","o","Show","(",")","&","#","x","2","F",";","&","#","x","2","F",";","重写","展示","接口","，","用于","验证","&","#","123",";","cout","m","_","pColor","-","GetColor","(",")","&","quot",";","Crcle","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","class","Rectangle",":","publc","Shape","&","#","123",";","publc",":","Rectangle","(","Color","*","pColor",")",":","Shape","(","pColor",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","构造","矩形","时","指定","颜色","o","Show","(",")","&","#","x","2","F",";","&","#","x","2","F",";","重写","展示","接口","，","用于","验证","&","#","123",";","cout","m","_","pColor","-","GetColor","(",")","&","quot",";","Rectangle","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","class","Trangle",":","publc","Shape","&","#","123",";","publc",":","Trangle","(","Color","*","pColor",")",":","Shape","(","pColor",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","构造","三角形时","指定","颜色","o","Show","(",")","&","#","x","2","F",";","&","#","x","2","F",";","重写","展示","接口","，","用于","验证","&","#","123",";","cout","m","_","pColor","-","GetColor","(",")","&","quot",";","Trangle","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","#","nclue","ostream","#","nclue","&","quot",";","brge",".","h","&","quot",";","usng","namespace","st",";","nt","man","(",")","&","#","123",";","Shape","*","pBlueCrcle","&","#","x","3","D",";","new","Crcle","(","new","Blue","(",")",")",";","pBlueCrcle","-","Show","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","BlueCrcle","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/","title":"桥接模式","content":"简介\n桥接模式：一种结构型设计模式\n应用场景：一个对象由多部分属性组成，而对象与属性之间的关系，有些为has a，有些为is a，为了更灵活也更合理地实现功能，应该根据对象的组成关系将属性抽象\n\n举例：红色的圆可以继承自圆的抽象类，而...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:42:00"},{"word":["简介","代理","模式","：","一种","结构","型","设计","模式","应用","场景","：","代理","模式","，","工作","中","很","常用","。","我们","在","公司","使用","网络","服务","时","，","都会","经过","代理服务器","，","这个","服务器","会","限制","访问","，","统计","流量","，","这","便是","代理","模式","的","作用","。","代理","模式","可以","对","访问","进行","一些","额外","的","操作","。","在","C++","11","中的","智能","指针","share","_","ptr","便是","代理","模式","的","典型","应用","，","对","指针","提供","代理","的","同时","增加","了","引用","计数","，","用于","保证","内存","的","释放","。","实现","方式","：","创建","代理","类","，","将","需要","被","代理","的","对象","作为","成员","变量","，","并","在","构造","时","赋","初值","，","需要","增加","的","代理","服务","作为","其他","成员","变量","。","重载","被","代理","对象","的","操作","符","，","在","对","被","代理","对象","进行","操作","时","，","进行","记录","或","其他","需求","。","本文","就","使用","引用","计数","指针","作为","举例","代理","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","class","Proxy","_","Ptr","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","构造","，","代理","指针","并","开始","计数","Proxy","_","Ptr","(","nt","*","p",")",":","m","_","pData","(","p",")",",","m","_","pCnt","(","NULL",")","&","#","123",";","m","_","pCnt","&","#","x","3","D",";","new","nt","(","1",")",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","拷贝","构造","，","引用","计数","+","1","Proxy","_","Ptr","(","Proxy","_","Ptr","&","amp",";","rhs",")",":","m","_","pData","(","rhs",".","m","_","pData",")",",","m","_","pCnt","(","rhs",".","m","_","pCnt",")","&","#","123",";","+","+","(","*","m","_","pCnt",")",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","赋值","，","原","引用","计数","-","1","，","新","引用","计数","+","1","Proxy","_","Ptr","&","amp",";","operator","&","#","x","3","D",";","(","Proxy","_","Ptr","&","amp",";","rhs",")","&","#","123",";","f","(","m","_","pData","&","#","x","3","D",";","&","#","x","3","D",";","rhs",".","m","_","pData",")","&","#","123",";","return","*","ths",";","&","#","125",";","f","(","NULL","!","&","#","x","3","D",";","m","_","pCnt",")","&","#","123",";","-","-","(","*","m","_","pCnt",")",";","f","(","0","&","#","x","3","D",";","&","#","x","3","D",";","*","m","_","pCnt",")","&","#","123",";","cout","&","quot",";","elete","&","quot",";","*","m","_","pData","enl",";","elete","m","_","pData",";","m","_","pData","&","#","x","3","D",";","NULL",";","&","#","125",";","m","_","pData","&","#","x","3","D",";","rhs",".","m","_","pData",";","m","_","pCnt","&","#","x","3","D",";","rhs",".","m","_","pCnt",";","+","+","(","*","m","_","pCnt",")",";","&","#","125",";","return","*","ths",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","析构","，","引用","计数","-","1","，","计数","为","0时","释放","内存","~","Proxy","_","Ptr","(",")","&","#","123",";","-","-","(","*","m","_","pCnt",")",";","f","(","0","&","#","x","3","D",";","&","#","x","3","D",";","*","m","_","pCnt",")","&","#","123",";","cout","&","quot",";","elete","&","quot",";","*","m","_","pData","enl",";","elete","m","_","pData",";","m","_","pData","&","#","x","3","D",";","NULL",";","&","#","125",";","&","#","125",";","nt","operator","*","(",")","&","#","123",";","return","*","m","_","pData",";","&","#","125",";","o","Show","(",")","&","#","123",";","cout","&","quot",";","Data",":","&","quot",";","*","m","_","pData","&","quot",";","Count",":","&","quot",";","*","m","_","pCnt","enl",";","&","#","125",";","prate",":","nt","*","m","_","pData",";","&","#","x","2","F",";","&","#","x","2","F",";","被","代理","的","对象","nt","*","m","_","pCnt",";","&","#","x","2","F",";","&","#","x","2","F",";","引用","计数","&","#","125",";",";","主","函数","中的","使用","nt","man","(",")","&","#","123",";","Proxy","_","Ptr","p","(","new","nt","(","6",")",")",";","Proxy","_","Ptr","p","2","(","new","nt","(","10",")",")",";","p","&","#","x","3","D",";","p","2",";","cout","&","quot",";","-","-","-","-","-","no","ponter","to","6","-","-","-","-","-","&","quot",";","enl",";","cout","&","quot",";","p","-","m","_","pData",":","&","quot",";","*","p","enl",";","p","2",".","Show","(",")",";","cout","&","quot",";","-","-","-","-","-","begn","estructon","-","-","-","-","-","&","quot",";","enl",";","return","0",";","&","#","125",";","控制台","输出","结果","elete","6","-","-","-","-","-","no","ponter","to","6","-","-","-","-","-","p","-","m","_","pData",":","10","Data",":","10","Count",":","2","-","-","-","-","-","begn","estructon","-","-","-","-","-","elete","10","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/","title":"代理模式","content":"简介\n代理模式：一种结构型设计模式\n应用场景：代理模式，工作中很常用。我们在公司使用网络服务时，都会经过代理服务器，这个服务器会限制访问，统计流量，这便是代理模式的作用。代理模式可以对访问进行一些额外的操作。在C++11中的智能指针s...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:41:00"},{"word":["简介","原型","模式","：","一种","创建","型","设计","模式","应用","场景","：","一个","基类","，","有","很多","派生","类","，","在","实际","开发","中","，","经常","使用","一个","基类","指针","，","根据","不同","情况","将","该","指针","指向","不同的","派生","类","对象","，","以","实现","多态","。","之后","经过","逻辑","或","业务","很","长的","方法","调用","后","，","需要","一个","该","派生","类","对象","的","拷贝","，","但","此时","会","遇到","一个","问题","，","如果","将","该","指针","解","引用","获得","对象","后传","入","拷贝","构造","函数","，","new","时","是","需要","确定","对象","类型","的","，","但","此时","对象","类型","可能会","很难","或","无法","确定","，","所以","原型","模式","登场","了","。","举例","：","有","一个","果汁","的","抽象","类","和","各种","果汁","的","实现","类","，","我们","使用","了","一个","果汁","类","的","基类","指针","指向","了","一个","具体的","苹果汁","对象","，","在","过","了","很久","很久","之后","，","需要","获得","一份","该","种类","果汁","的","拷贝","。","但","此时","果汁","已经","喝","没","了","，","没有办法","通过","手上","的","这个","基类","指针","确定","该","果汁","的","品种","了","，","所以","我们","需要","每个","品种","的","果汁","都","能","提供","一个","方法","，","用以","获得","该","品种","果汁","的","拷贝","。","实现","方式","：","首先","，","在","基类","中","添加","一个","用于","派生","类","拷贝","的","纯","虚","函数","Clone","(",")","，","每个","想要","被","实例","化","的","派生","类","都","需要","去","实现","该","方法","然后","，","为","了","使用","户","（","其他","开发","人员","）","能够","通过","该","方法","获得","当前","派生","类","对象","的","拷贝","，","在","该","方法","中","调用","自身","类","的","拷贝","构造","函数","最后","，","将","自身","（","*","ths","）","传入","拷贝","构造","函数","优点","：","无需","确定","基类","指针","所","指向","的","对象","类型","，","即可","获得","相同","类型","的","拷贝","，","提高","了","创建","效率","缺点","：","每个","派生","类","都","需要","实现","Clone","(",")","方法","，","增加","了","代码","量","原型","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","果汁","的","抽象","类","class","Juce","&","#","123",";","publc",":","rtual","Juce","*","Clone","(",")","&","#","x","3","D",";","0",";","&","#","x","2","F",";","&","#","x","2","F",";","用于","对象","类型","拷贝","rtual","o","Show","(",")","&","#","x","3","D",";","0",";","&","#","x","2","F",";","&","#","x","2","F",";","验证","果汁","类型","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","派生","类","class","OrangeJuce",":","publc","Juce","&","#","123",";","publc",":","rtual","Juce","*","Clone","(",")","&","#","123",";","return","new","OrangeJuce","(","*","ths",")",";","&","#","x","2","F",";","&","#","x","2","F",";","返回","当前","对象","类型","的","拷贝","&","#","125",";","rtual","o","Show","(",")","&","#","x","2","F",";","&","#","x","2","F",";","用于","验证","对象","类型","&","#","123",";","cout","&","quot",";","Orange","Juce","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","class","LemonJuce",":","publc","Juce","&","#","123",";","publc",":","rtual","Juce","*","Clone","(",")","&","#","123",";","return","new","LemonJuce","(","*","ths",")",";","&","#","125",";","rtual","o","Show","(",")","&","#","123",";","cout","&","quot",";","Lemon","Juce","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","class","AppleJuce",":","publc","Juce","&","#","123",";","publc",":","rtual","Juce","*","Clone","(",")","&","#","123",";","return","new","AppleJuce","(","*","ths",")",";","&","#","125",";","rtual","o","Show","(",")","&","#","123",";","cout","&","quot",";","Apple","Juce","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","#","nclue","ostream","#","nclue","&","quot",";","prototype",".","h","&","quot",";","usng","namespace","st",";","nt","man","(",")","&","#","123",";","Juce","*","pJuce","&","#","x","3","D",";","new","AppleJuce","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","基类","指针","指向","派生","类","对象","pJuce","-","Show","(",")",";","&","#","x","2","F",";","*","*","经过","&","#","x","2","F",";","传递","了","很久","很久","之后","*","以至于","忘记","了","或","难以","确定","*","该","基类","指针","所","指向","的","对象","具体","类型","*","&","#","x","2","F",";","Juce","*","pNewJuce","&","#","x","3","D",";","pJuce","-","Clone","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","获取","拷贝","对象","pNewJuce","-","Show","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","Apple","Juce","Apple","Juce","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/","title":"原型模式","content":"简介\n原型模式：一种创建型设计模式\n应用场景：一个基类，有很多派生类，在实际开发中，经常使用一个基类指针，根据不同情况将该指针指向不同的派生类对象，以实现多态。之后经过逻辑或业务很长的方法调用后，需要一个该派生类对象的拷贝，但此时会遇...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:39:53"},{"word":["简介","建造","者","模式","：","一种","创建","型","设计","模式","应用","场景","：","某个","对象","由","多","部分","组成","，","各部","分内","部","构建","过程","一直","变化","，","但是","所有","部分","之间","的","组合","关系","不变","举例","：","要画","一个","图形","，","分为","画","形状","和","填","色","两步","，","这","两步","固定","不会","变","，","但是","具体","画","的","形状","与","颜色","会","因为","需求","经常","变化","。","所以","为了","每次","形状","与","颜色","的","需求","改变","时","无需","更改","原本","代码","，","只","扩展","即可","完成","，","可以","通过","构建","一个","中间","者","，","该","中间","者","只能","满足","某次","需求","的","要求","构建","出","图形","（","类似于","特定","的","画笔","，","只能","画出","来","绿色","圆","或","红色","三角","）","，","需求","变更","时","只","需","扩展","一个","新的","中间","者","即可","。","该","中间","者","就是","建造","者","。","实现","方式","：","首先","，","构建","要","被","构造","出来","的","图形","类","，","并","向","外部","提供","能","修改","该","图形","类","各组","成","部分","的","接口","然后","，","构建","建造","者","的","抽象","类","，","所有","派生","的","建造","者","根据","自身","作用","重写","接口","，","返回","不同的","图形","对象","最后","，","构建","一个","导演","类","，","导演","类","对象","可","根据","设定","的","不同","构建","者","，","获得","不同的","图形","对象","优点","：","将","一个","复杂","对象","的","构建","与","它","的","表示","分离","，","相同","的","构建","过程","可以","创建","不同的","表示","。","有","新的","表示","可以","遵循","开放","封闭","原则","，","扩展","新的","类","代码","完成","需求","。","缺点","：","如果","构建","的","过程","发生","变化","，","所有","建造","者","都","需要","更改","代码","。","建造","者","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","要","构建","的","对象","class","Graphc","&","#","123",";","publc",":","Graphc","(",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","常","变","属性","的","设置","接口","o","SetShape","(","strng","strShape",")","&","#","123",";","m","_","strShape","&","#","x","3","D",";","strShape",";","&","#","125",";","o","SetColor","(","strng","strColor",")","&","#","123",";","m","_","strColor","&","#","x","3","D",";","strColor",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","图形","的","验证","方法","o","Show","(",")","&","#","123",";","cout","m","_","strColor","m","_","strShape","enl",";","&","#","125",";","prate",":","strng","m","_","strShape",";","strng","m","_","strColor",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","建造","者","抽象","类","class","Buler","&","#","123",";","publc",":","Buler","(",")",":","m","_","pGraphc","(","NULL",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","创建","空白","图形","o","CreateGraphc","(",")","&","#","123",";","f","(","NULL","&","#","x","3","D",";","&","#","x","3","D",";","m","_","pGraphc",")","&","#","123",";","m","_","pGraphc","&","#","x","3","D",";","new","Graphc","(",")",";","&","#","125",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","获取","描绘","完成","的","图形","Graphc","*","GetGraphc","(",")","&","#","123",";","return","m","_","pGraphc",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","留给","派生","类","实现","的","描绘","过程","rtual","o","DrawShape","(",")","&","#","x","3","D",";","0",";","rtual","o","DrawColor","(",")","&","#","x","3","D",";","0",";","protecte",":","Graphc","*","m","_","pGraphc",";","&","#","125",";",";","class","GreenCrcleBuler",":","publc","Buler","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","根据","类","的","功能","实现","描绘","过程","o","DrawShape","(",")","&","#","123",";","f","(","NULL","!","&","#","x","3","D",";","m","_","pGraphc",")","&","#","123",";","m","_","pGraphc","-","SetShape","(","&","quot",";","Crcle","&","quot",";",")",";","&","#","125",";","&","#","125",";","o","DrawColor","(",")","&","#","123",";","f","(","NULL","!","&","#","x","3","D",";","m","_","pGraphc",")","&","#","123",";","m","_","pGraphc","-","SetColor","(","&","quot",";","Green","&","quot",";",")",";","&","#","125",";","&","#","125",";","&","#","125",";",";","class","ReRectangleBuler",":","publc","Buler","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","根据","类","的","功能","实现","描绘","过程","o","DrawShape","(",")","&","#","123",";","f","(","NULL","!","&","#","x","3","D",";","m","_","pGraphc",")","&","#","123",";","m","_","pGraphc","-","SetShape","(","&","quot",";","Rectangle","&","quot",";",")",";","&","#","125",";","&","#","125",";","o","DrawColor","(",")","&","#","123",";","f","(","NULL","!","&","#","x","3","D",";","m","_","pGraphc",")","&","#","123",";","m","_","pGraphc","-","SetColor","(","&","quot",";","Re","&","quot",";",")",";","&","#","125",";","&","#","125",";","&","#","125",";",";","class","BlueTrangleBuler",":","publc","Buler","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","根据","类","的","功能","实现","描绘","过程","o","DrawShape","(",")","&","#","123",";","f","(","NULL","!","&","#","x","3","D",";","m","_","pGraphc",")","&","#","123",";","m","_","pGraphc","-","SetShape","(","&","quot",";","Trangle","&","quot",";",")",";","&","#","125",";","&","#","125",";","o","DrawColor","(",")","&","#","123",";","f","(","NULL","!","&","#","x","3","D",";","m","_","pGraphc",")","&","#","123",";","m","_","pGraphc","-","SetColor","(","&","quot",";","Blue","&","quot",";",")",";","&","#","125",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","导演","类","class","Drector","&","#","123",";","publc",":","Drector","(",")",":","m","_","pBuler","(","NULL",")","&","#","123",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","根据","需求","设置","对应","的","建造","者","o","SetBuler","(","Buler","&","amp",";","pBuler",")","&","#","123",";","m","_","pBuler","&","#","x","3","D",";","&","amp",";","pBuler",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","通过","建造","者","获得","描绘","完成","的","图形","Graphc","*","DrawGraphc","(",")","&","#","123",";","f","(","NULL","&","#","x","3","D",";","&","#","x","3","D",";","m","_","pBuler",")","&","#","123",";","return","NULL",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","建造","过程","为","不变","的","因素","m","_","pBuler","-","CreateGraphc","(",")",";","m","_","pBuler","-","DrawShape","(",")",";","m","_","pBuler","-","DrawColor","(",")",";","return","m","_","pBuler","-","GetGraphc","(",")",";","&","#","125",";","prate",":","Buler","*","m","_","pBuler",";","&","#","125",";",";","主","函数","中的","使用","#","nclue","ostream","#","nclue","&","quot",";","buler",".","hpp","&","quot",";","usng","namespace","st",";","nt","man","(",")","&","#","123",";","Drector","MyDrector",";","&","#","x","2","F",";","&","#","x","2","F",";","根据","导演","的","不同","需求","，","分别","设置","不同的","建造","者","，","获得","满足","需求","的","图形","GreenCrcleBuler","BulerGC",";","&","#","x","2","F",";","&","#","x","2","F",";","绿色","圆形","的","建造","者","MyDrector",".","SetBuler","(","BulerGC",")",";","Graphc","*","pGraphcGC","&","#","x","3","D",";","MyDrector",".","DrawGraphc","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","导演","使用","建造","者","画图","pGraphcGC","-","Show","(",")",";","ReRectangleBuler","BulerRB",";","&","#","x","2","F",";","&","#","x","2","F",";","红色","矩形","的","建造","者","MyDrector",".","SetBuler","(","BulerRB",")",";","Graphc","*","pGraphcRB","&","#","x","3","D",";","MyDrector",".","DrawGraphc","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","导演","使用","建造","者","画图","pGraphcRB","-","Show","(",")",";","BlueTrangleBuler","BulerBT",";","&","#","x","2","F",";","&","#","x","2","F",";","蓝色","三角","的","建造","者","MyDrector",".","SetBuler","(","BulerBT",")",";","Graphc","*","pGraphcBT","&","#","x","3","D",";","MyDrector",".","DrawGraphc","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","导演","使用","建造","者","画图","pGraphcBT","-","Show","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","资源","回收","f","(","NULL","&","#","x","3","D",";","&","#","x","3","D",";","pGraphcGC",")","&","#","123",";","elete","pGraphcGC",";","pGraphcGC","&","#","x","3","D",";","NULL",";","&","#","125",";","f","(","NULL","&","#","x","3","D",";","&","#","x","3","D",";","pGraphcRB",")","&","#","123",";","elete","pGraphcRB",";","pGraphcRB","&","#","x","3","D",";","NULL",";","&","#","125",";","f","(","NULL","&","#","x","3","D",";","&","#","x","3","D",";","pGraphcBT",")","&","#","123",";","elete","pGraphcBT",";","pGraphcBT","&","#","x","3","D",";","NULL",";","&","#","125",";","return","0",";","&","#","125",";","控制台","输出","结果","GreenCrcle","ReRectangle","BlueTrangle","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/","title":"建造者模式","content":"简介\n建造者模式：一种创建型设计模式\n应用场景：某个对象由多部分组成，各部分内部构建过程一直变化，但是所有部分之间的组合关系不变举例：要画一个图形，分为画形状和填色两步，这两步固定不会变，但是具体画的形状与颜色会因为需求经常变化。所以...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:39:26"},{"word":["单例","模式","（","又称","单","件","类","）","：","一种","创建","型","设计","模式","*","*","应用","场景","：","日志","系统","。","一个","项目","中","应该","只有","一个","日志","系统","，","即","一个","日志","类","。","所以","应当","确保","日志","类","只能","被","创建","一份","。","全局","数据","存储","。","谷歌","C++","代码","规范","中","规定","，","要","尽量","避免","全局变量","的","使用","。","所以","可以","用","一个","类","专门","负责","存储","数据","，","该类","只","存在","一个","实例","化","对象","，","各个","类","可以","在","其中","存储","需要","传递","的","数据","。","欢迎","补充","~","实现","方式","：","首先","，","将","类","的","构造","函数","、","拷贝","构造","函数","设","为","私有","，","即","无法","在外","部","通过","new","生成","该类","对象","。","然后","，","提供","一个","获取","唯一","实例","的","接口","，","外部","只能","通过","该","接口","获得","该类","的","实例","化","对象","。","最后","，","在","接口","中","通过","静态","变量","，","确保","该类","只","实例","化","了","一次","。","优点","：","通过","单","件","类","可以","实现","其他","类","之间","的","数据传输","而","不必","写","多","个","类","之间","的","接口","，","减少","了","代码","的","复杂度","缺点","：","单例","模式","的","实现","有","多种","模式","，","本文","示范","的","代码","并没有","考虑","多线程","情况","，","在","多线程","下","可能会","生成","多","份","实例","。","后","续会","将","改进","的","单例","模式","更新","在","下方","。","单例","模式","的","简单","代码","实现","：","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","日志","单","件","类","class","LogSngleton","&","#","123",";","publc",":","&","#","x","2","F",";","&","#","x","2","F",";","对外","提供","获取","唯一","实例","的","接口","statc","LogSngleton","*","Instance","(",")","&","#","123",";","f","(","NULL","&","#","x","3","D",";","&","#","x","3","D",";","m","_","pInstance",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","只","第一次","调用","此","接口","时","创建","实例","化","对象","m","_","pInstance","&","#","x","3","D",";","new","LogSngleton","(",")",";","&","#","125",";","return","m","_","pInstance",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","展示","当前","日志","o","Look","(",")","&","#","123",";","prntf","(","&","quot",";","%","s","\\","n","&","quot",";",",","strLog",".","c","_","str","(",")",")",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","写入","日志","o","Wrte","(","strng","strNew",")","&","#","123",";","strLog","+","&","#","x","3","D",";","strNew",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","内存","回收","~","LogSngleton","(",")","&","#","123",";","f","(","NULL","!","&","#","x","3","D",";","m","_","pInstance",")","&","#","123",";","elete","m","_","pInstance",";","m","_","pInstance","&","#","x","3","D",";","NULL",";","&","#","125",";","&","#","125",";","prate",":","&","#","x","2","F",";","&","#","x","2","F",";","将","构造","、","拷贝","构造","函数","设","为","私有","LogSngleton","(",")","&","#","123",";","&","#","125",";","LogSngleton","(","LogSngleton","&","amp",";","oLog",")","&","#","123",";","&","#","125",";","statc","LogSngleton","*","m","_","pInstance",";","&","#","x","2","F",";","&","#","x","2","F",";","指向","唯一","实例","的","指针","strng","strLog",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","记得","将","statc","指针","初始化","LogSngleton","*","LogSngleton",":",":","m","_","pInstance","&","#","x","3","D",";","NULL",";","主","函数","中的","使用","#","nclue","&","quot",";","Sngleton",".","hpp","&","quot",";","nt","man","(",")","&","#","123",";","LogSngleton","*","pUserA","&","#","x","3","D",";","LogSngleton",":",":","Instance","(",")",";","pUserA","-","Wrte","(","&","quot",";","Hello","&","quot",";",")",";","LogSngleton","*","pUserB","&","#","x","3","D",";","LogSngleton",":",":","Instance","(",")",";","pUserB","-","Look","(",")",";","return","0",";","&","#","125",";","控制台","输出","结果","Hello","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/","title":"单例模式","content":"单例模式（又称单件类）：一种创建型设计模式**\n应用场景：\n\n\n日志系统 。一个项目中应该只有一个日志系统，即一个日志类。所以应当确保日志类只能被创建一份。\n全局数据存储。谷歌C++代码规范中规定，要尽量避免全局变量的使用。所以可以用...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:36:45"},{"word":["简介","抽象","工厂","模式","：","一种","创建","型","设计","模式","应用","场景","：","在","工厂","方法","之上","，","考虑到","每一种","产品","就","要有","一个","工厂","，","产品","扩展","种类","时会","增加","大量","的","类","，","难于","管理","举例","：","本","来生","产","木桌","和","木椅","的","工厂","，","要","增加","铁桌铁椅","的","产品","种类","。","如果","本来","使用","的","是","工厂","方法","模式","，","需要","在","原本","两个","工厂","的","基础上","，","再","增加","两个","工厂","。","此时","可以","将","一个","工厂","定位","为","木质","工厂","，","另一个","工厂","为","铁质","工厂","，","两个","工厂","分别","都","有","桌椅","的","生产线","实现","方式","：","在","工厂","抽象","类","中","增加","产品","的","接口","，","在","实现","类","中","实现","具体的","产品","种类","。","优点","：","便于","扩展","已有","产品","的","系列","缺点","：","增加","新的","产品","类型","时","（","已","有","桌","、","椅","，","要","增加","门","）","，","需要","修改","所有","工厂","抽象","工厂","模式","的","简单","代码","实现","#","nclue","ostream",">","usng","namespace","st",";","产品","A","抽象","类","class","Desk","&","#","123",";","publc",":","rtual","o","Show","(",")","=","0",";","&","#","125",";",";","产品","B","抽象","类","class","Char","&","#","123",";","publc",":","rtual","o","Show","(",")","=","0",";","&","#","125",";",";","class","WooDesk",":","publc","Desk","&","#","123",";","publc",":","o","Show","(",")","&","#","123",";","cout","\"","WooDesk","\"","enl",";","&","#","125",";","&","#","125",";",";","class","IronDesk",":","publc","Desk","&","#","123",";","publc",":","o","Show","(",")","&","#","123",";","cout","\"","IronDesk","\"","enl",";","&","#","125",";","&","#","125",";",";","class","WooChar",":","publc","Char","&","#","123",";","publc",":","o","Show","(",")","&","#","123",";","cout","\"","WooChar","\"","enl",";","&","#","125",";","&","#","125",";",";","class","IronChar",":","publc","Char","&","#","123",";","publc",":","o","Show","(",")","&","#","123",";","cout","\"","IronChar","\"","enl",";","&","#","125",";","&","#","125",";",";","工厂","抽象","类","class","Factory","&","#","123",";","publc",":","rtual","Desk","*","CreateDesk","(",")","=","0",";","rtual","Char","*","CreateChar","(",")","=","0",";","&","#","125",";",";","生产","木质","产品","的","工厂","class","WooFactory",":","publc","Factory","&","#","123",";","publc",":","Desk","*","CreateDesk","(",")","&","#","123",";","return","new","WooDesk","(",")",";","&","#","125",";","Char","*","CreateChar","(",")","&","#","123",";","return","new","WooChar","(",")",";","&","#","125",";","&","#","125",";",";","生产","铁质","产品","的","工厂","class","IronFactory",":","publc","Factory","&","#","123",";","publc",":","Desk","*","CreateDesk","(",")","&","#","123",";","return","new","IronDesk","(",")",";","&","#","125",";","Char","*","CreateChar","(",")","&","#","123",";","return","new","IronChar","(",")",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","#","nclue","&","quot",";","AbstractFactory",".","hpp","&","quot",";","nt","man","(",")","&","#","123",";","Factory","*","FactoryWoo","&","#","x","3","D",";","new","WooFactory","(",")",";","Desk","*","DeskWoo","&","#","x","3","D",";","FactoryWoo","-","CreateDesk","(",")",";","DeskWoo","-","Show","(",")",";","Factory","*","FactoryIron","&","#","x","3","D",";","new","IronFactory","(",")",";","Char","*","CharIron","&","#","x","3","D",";","FactoryIron","-","CreateChar","(",")",";","CharIron","-","Show","(",")",";","f","(","NULL","!","&","#","x","3","D",";","FactoryWoo",")","&","#","123",";","elete","FactoryWoo",";","FactoryWoo","&","#","x","3","D",";","NULL",";","&","#","125",";","f","(","NULL","!","&","#","x","3","D",";","FactoryIron",")","&","#","123",";","elete","FactoryIron",";","FactoryIron","&","#","x","3","D",";","NULL",";","&","#","125",";","return","0",";","&","#","125",";","控制台","输出","结果","WooDesk","IronChar","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","title":"抽象工厂模式","content":"简介\n抽象工厂模式：一种创建型设计模式\n应用场景：在工厂方法之上，考虑到每一种产品就要有一个工厂，产品扩展种类时会增加大量的类，难于管理举例：本来生产木桌和木椅的工厂，要增加铁桌铁椅的产品种类。如果本来使用的是工厂方法模式，需要在原本...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:20:10"},{"word":["工厂","方法","模式","：","一种","创建","型","设计","模式","应用","场景","：","简单","工厂","模式","之上","，","考虑到","工厂","如果","新","加","产品","，","需要","修改","产品","类型","的","枚举","，","与","工厂","生产","产品","时","的","逻辑","判断","细节","，","修改","较大","此时","工厂","方法","模式","登场","：","将","生产","模式","改为","一个","工厂","只","专注","生产","一种","产品","。","有","新产品","则","创建","新","工厂","，","无需","改动","原本","工厂","。","实现","方式","：","所有","工厂","继承","自","工厂","抽象","类","，","如果","要","制作","某一","产品","，","就","使用","该","产品","的","对应","工厂","进行","生产","优点","：","新增","产品","无需","改动","原本","代码","，","新","增产","品类","与","工厂","类","即可","，","符合","开闭","原则","缺点","：","见","抽象","工厂","模式","工厂","方法","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","产品","抽象","类","class","Prouct","&","#","123",";","publc",":","rtual","o","Show","(",")","&","#","x","3","D",";","0",";","&","#","x","2","F",";","&","#","x","2","F",";","用于","验证","产品信息","&","#","125",";",";","class","WooDesk",":","publc","Prouct","&","#","123",";","publc",":","o","Show","(",")","&","#","123",";","cout","&","quot",";","WooDesk","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","class","WooChar",":","publc","Prouct","&","#","123",";","publc",":","o","Show","(",")","&","#","123",";","cout","&","quot",";","WooChar","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","工厂","抽象","类","class","Factory","&","#","123",";","publc",":","rtual","Prouct","*","CreateProuct","(",")","&","#","x","3","D",";","0",";","&","#","125",";",";","class","DeskFactory",":","publc","Factory","&","#","123",";","publc",":","Prouct","*","CreateProuct","(",")","&","#","123",";","return","new","WooDesk","(",")",";","&","#","125",";","&","#","125",";",";","class","CharFactory",":","publc","Factory","&","#","123",";","publc",":","Prouct","*","CreateProuct","(",")","&","#","123",";","return","new","WooChar","(",")",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","#","nclue","&","quot",";","FactoryMetho",".","hpp","&","quot",";","nt","man","(",")","&","#","123",";","Factory","*","FactoryDesk","&","#","x","3","D",";","new","DeskFactory","(",")",";","Prouct","*","DeskWoo","&","#","x","3","D",";","FactoryDesk","-","CreateProuct","(",")",";","DeskWoo","-","Show","(",")",";","Factory","*","FactoryChar","&","#","x","3","D",";","new","CharFactory","(",")",";","Prouct","*","CharWoo","&","#","x","3","D",";","FactoryChar","-","CreateProuct","(",")",";","CharWoo","-","Show","(",")",";","f","(","NULL","!","&","#","x","3","D",";","FactoryDesk",")","&","#","123",";","elete","FactoryDesk",";","FactoryDesk","&","#","x","3","D",";","NULL",";","&","#","125",";","f","(","NULL","!","&","#","x","3","D",";","FactoryChar",")","&","#","123",";","elete","FactoryChar",";","FactoryChar","&","#","x","3","D",";","NULL",";","&","#","125",";","return","0",";","&","#","125",";","控制台","输出","结果","WooDesk","WooChar","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/","title":"工厂方法模式","content":"工厂方法模式：一种创建型设计模式\n应用场景：简单工厂模式之上，考虑到工厂如果新加产品，需要修改产品类型的枚举，与工厂生产产品时的逻辑判断细节，修改较大此时工厂方法模式登场：将生产模式改为一个工厂只专注生产一种产品。有新产品则创建新工厂...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:15:04"},{"word":["简介","简单","工厂","模式","：","一种","创建","型","设计","模式","应用","场景","：","一个","工厂","，","生产","很多","产品","。","实现","方式","：","将","所有","产","品类","都","继承","自","产品","抽象","类","，","工厂","生产","产品","时","告知","要","制作","的","产品","类型","，","通过","对","类型","判断","，","返回","不同的","产品","优点","：","实现","对象","的","创建","与","使用","分离","缺点","：","增加","产品","类型","时","需要","修改","原本","逻辑","代码","简单","工厂","模式","的","简单","代码","实现","#","nclue","ostream","usng","namespace","st",";","&","#","x","2","F",";","&","#","x","2","F",";","枚举","定义","产品","类型","typeef","enum","ProuctType","&","#","123",";","Desk",",","Char",",","&","#","125",";","PROTYPE",";","&","#","x","2","F",";","&","#","x","2","F",";","产品","抽象","类","class","Prouct","&","#","123",";","publc",":","rtual","o","Show","(",")","&","#","x","3","D",";","0",";","&","#","x","2","F",";","&","#","x","2","F",";","用于","验证","产品信息","&","#","125",";",";","class","WooDesk",":","publc","Prouct","&","#","123",";","publc",":","o","Show","(",")","&","#","123",";","cout","&","quot",";","WooDesk","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","class","WooChar",":","publc","Prouct","&","#","123",";","publc",":","o","Show","(",")","&","#","123",";","cout","&","quot",";","WooChar","&","quot",";","enl",";","&","#","125",";","&","#","125",";",";","&","#","x","2","F",";","&","#","x","2","F",";","工厂","类","class","Factory","&","#","123",";","publc",":","Prouct","*","CreateProuct","(","PROTYPE","type",")","&","#","123",";","swtch","(","type",")","&","#","123",";","case","Desk",":","return","new","WooDesk","(",")",";","case","Char",":","return","new","WooChar","(",")",";","efault",":","break",";","&","#","125",";","return","NULL",";","&","#","125",";","&","#","125",";",";","主","函数","中的","使用","#","nclue","&","quot",";","SmpleFactory",".","hpp","&","quot",";","nt","man","(",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","创建","工厂","Factory","*","MyFactory","&","#","x","3","D",";","new","Factory","(",")",";","&","#","x","2","F",";","&","#","x","2","F",";","传入","产品","类型","获取","产品","Prouct","*","DeskWoo","&","#","x","3","D",";","MyFactory","-","CreateProuct","(","Desk",")",";","DeskWoo","-","Show","(",")",";","Prouct","*","CharWoo","&","#","x","3","D",";","MyFactory","-","CreateProuct","(","Char",")",";","CharWoo","-","Show","(",")",";","f","(","NULL","!","&","#","x","3","D",";","MyFactory",")","&","#","123",";","elete","MyFactory",";","MyFactory","&","#","x","3","D",";","NULL",";","&","#","125",";","return","0",";","&","#","125",";","控制台","输出","结果","WooDesk","WooChar","如","有","错误","，","欢迎","指正"],"url":"https://jeremyyvv.github.io/2021/03/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","title":"简单工厂模式","content":"简介\n简单工厂模式：一种创建型设计模式\n应用场景：一个工厂，生产很多产品。\n实现方式：将所有产品类都继承自产品抽象类，工厂生产产品时告知要制作的产品类型，通过对类型判断，返回不同的产品\n优点：实现对象的创建与使用分离\n缺点：增加产品类...","author":"JeremyYv","categorie":{"url":"https://jeremyyvv.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","name":"设计模式"},"date":"2021-03-21 19:10:56"}]